{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 130, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/yogeshmalvi/Downloads/Telegram%20Desktop/LMS%2BEcommerce/web/src/lib/razorpay.ts"],"sourcesContent":["// Server-side Razorpay initialization\r\n// This file is only used in API routes (server-side)\r\n\r\nlet razorpayInstance: any = null;\r\n\r\nexport function getRazorpayInstance() {\r\n  if (!razorpayInstance) {\r\n    // Use dynamic require for CommonJS module (works in Next.js API routes)\r\n    const Razorpay = require(\"razorpay\");\r\n    \r\n    // Try to get keys from environment variables\r\n    const keyId = process.env.RAZORPAY_KEY_ID || process.env.NEXT_PUBLIC_RAZORPAY_KEY_ID;\r\n    const keySecret = process.env.RAZORPAY_KEY_SECRET;\r\n    \r\n    // Validate keys are present\r\n    if (!keyId || keyId.trim() === \"\") {\r\n      console.error(\"RAZORPAY_KEY_ID:\", process.env.RAZORPAY_KEY_ID);\r\n      console.error(\"NEXT_PUBLIC_RAZORPAY_KEY_ID:\", process.env.NEXT_PUBLIC_RAZORPAY_KEY_ID);\r\n      throw new Error(\"Razorpay key_id is missing. Please set RAZORPAY_KEY_ID or NEXT_PUBLIC_RAZORPAY_KEY_ID in .env.local file.\");\r\n    }\r\n    \r\n    if (!keySecret || keySecret.trim() === \"\") {\r\n      console.error(\"RAZORPAY_KEY_SECRET is missing\");\r\n      throw new Error(\"Razorpay key_secret is missing. Please set RAZORPAY_KEY_SECRET in .env.local file.\");\r\n    }\r\n    \r\n    razorpayInstance = new Razorpay({\r\n      key_id: keyId.trim(),\r\n      key_secret: keySecret.trim(),\r\n    });\r\n  }\r\n  return razorpayInstance;\r\n}\r\n\r\n"],"names":[],"mappings":"AAAA,sCAAsC;AACtC,qDAAqD;;;;;AAErD,IAAI,mBAAwB;AAErB,SAAS;IACd,IAAI,CAAC,kBAAkB;QACrB,wEAAwE;QACxE,MAAM;QAEN,6CAA6C;QAC7C,MAAM,QAAQ,QAAQ,GAAG,CAAC,eAAe;QACzC,MAAM,YAAY,QAAQ,GAAG,CAAC,mBAAmB;QAEjD,4BAA4B;QAC5B,IAAI,CAAC,SAAS,MAAM,IAAI,OAAO,IAAI;YACjC,QAAQ,KAAK,CAAC,oBAAoB,QAAQ,GAAG,CAAC,eAAe;YAC7D,QAAQ,KAAK,CAAC;YACd,MAAM,IAAI,MAAM;QAClB;QAEA,IAAI,CAAC,aAAa,UAAU,IAAI,OAAO,IAAI;YACzC,QAAQ,KAAK,CAAC;YACd,MAAM,IAAI,MAAM;QAClB;QAEA,mBAAmB,IAAI,SAAS;YAC9B,QAAQ,MAAM,IAAI;YAClB,YAAY,UAAU,IAAI;QAC5B;IACF;IACA,OAAO;AACT"}},
    {"offset": {"line": 165, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/yogeshmalvi/Downloads/Telegram%20Desktop/LMS%2BEcommerce/web/src/app/api/razorpay/create-order/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\r\nimport { getRazorpayInstance } from \"@/lib/razorpay\";\r\n\r\nexport async function POST(request: NextRequest) {\r\n  try {\r\n    // Check if Razorpay keys are configured\r\n    const keyId = process.env.RAZORPAY_KEY_ID || process.env.NEXT_PUBLIC_RAZORPAY_KEY_ID;\r\n    const keySecret = process.env.RAZORPAY_KEY_SECRET;\r\n    \r\n    if (!keyId || !keySecret) {\r\n      return NextResponse.json(\r\n        { error: \"Razorpay keys not configured. Please set RAZORPAY_KEY_ID and RAZORPAY_KEY_SECRET in environment variables.\" },\r\n        { status: 500 }\r\n      );\r\n    }\r\n\r\n    const body = await request.json();\r\n    const { amount, currency = \"INR\", receipt, notes } = body;\r\n\r\n    if (!amount || amount <= 0) {\r\n      return NextResponse.json(\r\n        { error: \"Invalid amount\" },\r\n        { status: 400 }\r\n      );\r\n    }\r\n\r\n    const razorpay = getRazorpayInstance();\r\n\r\n    // Create Razorpay order\r\n    const options = {\r\n      amount: Math.round(amount * 100), // Convert to paise (smallest currency unit)\r\n      currency: currency,\r\n      receipt: receipt || `receipt_${Date.now()}`,\r\n      notes: notes || {},\r\n    };\r\n\r\n    const order = await razorpay.orders.create(options);\r\n\r\n    return NextResponse.json({\r\n      id: order.id,\r\n      amount: order.amount,\r\n      currency: order.currency,\r\n      receipt: order.receipt,\r\n    });\r\n  } catch (error: any) {\r\n    console.error(\"Razorpay order creation error:\", error);\r\n    return NextResponse.json(\r\n      { error: error.message || \"Failed to create order\" },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,wCAAwC;QACxC,MAAM,QAAQ,QAAQ,GAAG,CAAC,eAAe;QACzC,MAAM,YAAY,QAAQ,GAAG,CAAC,mBAAmB;QAEjD,IAAI,CAAC,SAAS,CAAC,WAAW;YACxB,OAAO,6MAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAA6G,GACtH;gBAAE,QAAQ;YAAI;QAElB;QAEA,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EAAE,MAAM,EAAE,WAAW,KAAK,EAAE,OAAO,EAAE,KAAK,EAAE,GAAG;QAErD,IAAI,CAAC,UAAU,UAAU,GAAG;YAC1B,OAAO,6MAAY,CAAC,IAAI,CACtB;gBAAE,OAAO;YAAiB,GAC1B;gBAAE,QAAQ;YAAI;QAElB;QAEA,MAAM,WAAW,IAAA,4MAAmB;QAEpC,wBAAwB;QACxB,MAAM,UAAU;YACd,QAAQ,KAAK,KAAK,CAAC,SAAS;YAC5B,UAAU;YACV,SAAS,WAAW,CAAC,QAAQ,EAAE,KAAK,GAAG,IAAI;YAC3C,OAAO,SAAS,CAAC;QACnB;QAEA,MAAM,QAAQ,MAAM,SAAS,MAAM,CAAC,MAAM,CAAC;QAE3C,OAAO,6MAAY,CAAC,IAAI,CAAC;YACvB,IAAI,MAAM,EAAE;YACZ,QAAQ,MAAM,MAAM;YACpB,UAAU,MAAM,QAAQ;YACxB,SAAS,MAAM,OAAO;QACxB;IACF,EAAE,OAAO,OAAY;QACnB,QAAQ,KAAK,CAAC,kCAAkC;QAChD,OAAO,6MAAY,CAAC,IAAI,CACtB;YAAE,OAAO,MAAM,OAAO,IAAI;QAAyB,GACnD;YAAE,QAAQ;QAAI;IAElB;AACF"}}]
}