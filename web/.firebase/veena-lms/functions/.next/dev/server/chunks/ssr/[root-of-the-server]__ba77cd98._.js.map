{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 118, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/yogeshmalvi/Downloads/Telegram%20Desktop/LMS%2BEcommerce/web/src/lib/firebaseClient.ts"],"sourcesContent":["import { getApps, initializeApp, type FirebaseApp } from \"firebase/app\";\nimport { getAuth, type Auth } from \"firebase/auth\";\nimport { getFirestore, type Firestore } from \"firebase/firestore\";\n\n// For Firebase JS SDK v7.20.0 and later, measurementId is optional\n// TODO: replace with the final, correct config from your Firebase console\nconst firebaseConfig = {\n  apiKey: \"AIzaSyC85KACqcAl8tnrzfwybbuMXKspvLfkMBQ\",\n  authDomain: \"veena-lms.firebaseapp.com\",\n  projectId: \"veena-lms\",\n  storageBucket: \"veena-lms.firebasestorage.app\",\n  messagingSenderId: \"843457897028\",\n  appId: \"1:843457897028:web:62a75a285947e39ca75211\",\n  measurementId: \"G-BVZ10GTDXJ\",\n};\n\nlet app: FirebaseApp;\nlet auth: Auth;\nlet db: Firestore;\n\nif (!getApps().length) {\n  app = initializeApp(firebaseConfig);\n  auth = getAuth(app);\n  db = getFirestore(app);\n} else {\n  app = getApps()[0]!;\n  auth = getAuth(app);\n  db = getFirestore(app);\n}\n\nexport { app, auth, db };"],"names":[],"mappings":";;;;;;;;AAAA;AAAA;AACA;AAAA;AACA;AAAA;;;;AAEA,mEAAmE;AACnE,0EAA0E;AAC1E,MAAM,iBAAiB;IACrB,QAAQ;IACR,YAAY;IACZ,WAAW;IACX,eAAe;IACf,mBAAmB;IACnB,OAAO;IACP,eAAe;AACjB;AAEA,IAAI;AACJ,IAAI;AACJ,IAAI;AAEJ,IAAI,CAAC,IAAA,wOAAO,IAAG,MAAM,EAAE;IACrB,MAAM,IAAA,8OAAa,EAAC;IACpB,OAAO,IAAA,0OAAO,EAAC;IACf,KAAK,IAAA,8OAAY,EAAC;AACpB,OAAO;IACL,MAAM,IAAA,wOAAO,GAAE,CAAC,EAAE;IAClB,OAAO,IAAA,0OAAO,EAAC;IACf,KAAK,IAAA,8OAAY,EAAC;AACpB"}},
    {"offset": {"line": 163, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/yogeshmalvi/Downloads/Telegram%20Desktop/LMS%2BEcommerce/web/src/components/layout/Header.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useMemo, useState } from \"react\";\nimport Link from \"next/link\";\nimport { usePathname, useRouter } from \"next/navigation\";\nimport { onAuthStateChanged, signOut, type User } from \"firebase/auth\";\nimport { auth, db } from \"@/lib/firebaseClient\";\nimport { collection, getDocs } from \"firebase/firestore\";\n\ntype SearchItem = {\n  id: string;\n  title: string;\n  type?: string;\n};\n\nexport function Header() {\n  const pathname = usePathname();\n  const router = useRouter();\n\n  const [search, setSearch] = useState(\"\");\n  const [user, setUser] = useState<User | null>(null);\n  const [showUserMenu, setShowUserMenu] = useState(false);\n  const [allItems, setAllItems] = useState<SearchItem[]>([]);\n  const [suggestionsOpen, setSuggestionsOpen] = useState(false);\n\n  // Decide what we are searching based on current page\n  const isClassesPage = pathname?.startsWith(\"/classes\");\n  const searchPlaceholder = isClassesPage\n    ? \"Search courses\"\n    : \"Search products\";\n\n  useEffect(() => {\n    const unsub = onAuthStateChanged(auth, (u) => setUser(u));\n    return () => unsub();\n  }, []);\n\n  // Load a lightweight list of products once for search suggestions\n  useEffect(() => {\n    const loadItems = async () => {\n      try {\n        const snapshot = await getDocs(collection(db, \"store_items\"));\n        const items: SearchItem[] = [];\n        snapshot.forEach((doc) => {\n          const data = doc.data() as any;\n          const title = (data.title || data.name || \"\").toString();\n          if (!title) return;\n          items.push({\n            id: doc.id,\n            title,\n            type: data.type || data.itemType,\n          });\n        });\n        setAllItems(items);\n      } catch (error) {\n        console.error(\"Error loading items for search suggestions:\", error);\n      }\n    };\n    loadItems();\n  }, []);\n\n  const filteredSuggestions = useMemo(() => {\n    const term = search.trim().toLowerCase();\n    if (!term) return [];\n    return allItems\n      .filter((item) => item.title.toLowerCase().includes(term))\n      .slice(0, 7);\n  }, [allItems, search]);\n\n  const handleSearchSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    const term = search.trim();\n    if (!term) return;\n\n    const query = encodeURIComponent(term);\n    if (isClassesPage) {\n      router.push(`/classes?search=${query}`);\n    } else {\n      router.push(`/?search=${query}`);\n    }\n  };\n\n  const handleSuggestionClick = (item: SearchItem) => {\n    setSuggestionsOpen(false);\n    setSearch(item.title);\n    // Go directly to product detail for a more \"Google result\" feel\n    router.push(`/item/${item.id}`);\n  };\n\n  const handleLogout = async () => {\n    await signOut(auth);\n    setShowUserMenu(false);\n    router.push(\"/\");\n  };\n\n  return (\n    <header className=\"bg-white/90 backdrop-blur-md border-b border-gray-100 sticky top-0 z-50\">\n      <div className=\"container mx-auto px-4\">\n        <div className=\"flex items-center justify-between h-16 gap-4\">\n          {/* Logo */}\n          <Link href=\"/\" className=\"text-xl md:text-2xl font-bold text-gray-900\">\n            Veena LMS\n          </Link>\n\n          {/* Center search bar */}\n          <form\n            onSubmit={handleSearchSubmit}\n            className=\"hidden md:flex flex-1 max-w-xl mx-4\"\n          >\n            <div className=\"relative w-full\">\n              <input\n                type=\"text\"\n                value={search}\n                onChange={(e) => {\n                  setSearch(e.target.value);\n                  setSuggestionsOpen(true);\n                }}\n                placeholder={searchPlaceholder}\n                className=\"w-full rounded-full border border-gray-200 bg-gray-50 px-4 py-2 text-sm text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500/60\"\n              />\n              <button\n                type=\"submit\"\n                className=\"absolute right-1 top-1 bottom-1 px-4 rounded-full bg-black text-white text-xs font-semibold hover:bg-gray-900\"\n              >\n                Search\n              </button>\n\n              {/* Desktop suggestions dropdown */}\n              {suggestionsOpen && filteredSuggestions.length > 0 && (\n                <div className=\"absolute left-0 right-0 top-full mt-1 rounded-2xl border border-gray-200 bg-white shadow-lg z-40\">\n                  <ul className=\"max-h-72 overflow-y-auto py-1 text-sm\">\n                    {filteredSuggestions.map((item) => (\n                      <li key={item.id}>\n                        <button\n                          type=\"button\"\n                          onClick={() => handleSuggestionClick(item)}\n                          className=\"flex w-full items-center justify-between px-3 py-2 hover:bg-gray-50\"\n                        >\n                          <span className=\"truncate text-left text-gray-800\">\n                            {item.title}\n                          </span>\n                          {item.type && (\n                            <span className=\"ml-2 rounded-full bg-gray-100 px-2 py-0.5 text-[10px] uppercase tracking-wide text-gray-500\">\n                              {item.type}\n                            </span>\n                          )}\n                        </button>\n                      </li>\n                    ))}\n                  </ul>\n                </div>\n              )}\n            </div>\n          </form>\n\n          {/* Right side: nav + icons */}\n          <div className=\"flex items-center gap-4\">\n            {/* Desktop navigation */}\n            <nav className=\"hidden md:flex items-center gap-4\">\n              <Link\n                href=\"/\"\n                className={`text-sm font-medium ${\n                  pathname === \"/\"\n                    ? \"text-blue-600\"\n                    : \"text-gray-700 hover:text-blue-600\"\n                }`}\n              >\n                Shop\n              </Link>\n              <Link\n                href=\"/classes\"\n                className={`text-sm font-medium ${\n                  pathname?.startsWith(\"/classes\")\n                    ? \"text-blue-600\"\n                    : \"text-gray-700 hover:text-blue-600\"\n                }`}\n              >\n                Classes\n              </Link>\n            </nav>\n\n          {/* Cart icon */}\n          <Link\n            href=\"/cart\"\n            className=\"relative inline-flex h-9 w-9 items-center justify-center rounded-full border border-gray-200 text-gray-700 hover:bg-gray-100\"\n          >\n            <span className=\"text-lg\">üõí</span>\n          </Link>\n\n            {/* User section */}\n            {!user ? (\n              <Link\n                href=\"/login\"\n                className=\"flex items-center h-9 px-3 rounded-full border border-gray-200 text-sm font-medium text-gray-700 hover:bg-gray-100\"\n              >\n                <span className=\"mr-2 text-base\">üë§</span>\n                <span>Login / Sign up</span>\n              </Link>\n            ) : (\n              <div className=\"relative\">\n                <button\n                  type=\"button\"\n                  onClick={() => setShowUserMenu((v) => !v)}\n                  className=\"flex items-center h-9 px-3 rounded-full border border-gray-200 text-sm font-medium text-gray-700 hover:bg-gray-100\"\n                >\n                  <span className=\"mr-2 text-base\">üë§</span>\n                  <span className=\"max-w-[120px] truncate\">\n                    {user.displayName || user.email || \"Account\"}\n                  </span>\n                </button>\n                {showUserMenu && (\n                  <div className=\"absolute right-0 mt-2 w-48 rounded-xl border border-gray-200 bg-white shadow-lg text-sm\">\n                    <Link\n                      href=\"/dashboard\"\n                      className=\"block px-4 py-2 hover:bg-gray-50\"\n                      onClick={() => setShowUserMenu(false)}\n                    >\n                      Dashboard\n                    </Link>\n                    <Link\n                      href=\"/orders\"\n                      className=\"block px-4 py-2 hover:bg-gray-50\"\n                      onClick={() => setShowUserMenu(false)}\n                    >\n                      Orders\n                    </Link>\n                    <button\n                      type=\"button\"\n                      onClick={handleLogout}\n                      className=\"w-full text-left px-4 py-2 hover:bg-gray-50 text-red-600\"\n                    >\n                      Logout\n                    </button>\n                  </div>\n                )}\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* Mobile search bar */}\n        <form onSubmit={handleSearchSubmit} className=\"md:hidden pb-3\">\n          <div className=\"relative\">\n            <input\n              type=\"text\"\n              value={search}\n              onChange={(e) => {\n                setSearch(e.target.value);\n                setSuggestionsOpen(true);\n              }}\n              placeholder={searchPlaceholder}\n              className=\"w-full rounded-full border border-gray-200 bg-gray-50 px-4 py-2 text-sm text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500/60\"\n            />\n            <button\n              type=\"submit\"\n              className=\"absolute right-1 top-1 bottom-1 px-4 rounded-full bg-black text-white text-xs font-semibold hover:bg-gray-900\"\n            >\n              Go\n            </button>\n\n            {/* Mobile suggestions dropdown */}\n            {suggestionsOpen && filteredSuggestions.length > 0 && (\n              <div className=\"absolute left-0 right-0 top-full mt-1 rounded-2xl border border-gray-200 bg-white shadow-lg z-40\">\n                <ul className=\"max-h-72 overflow-y-auto py-1 text-sm\">\n                  {filteredSuggestions.map((item) => (\n                    <li key={item.id}>\n                      <button\n                        type=\"button\"\n                        onClick={() => handleSuggestionClick(item)}\n                        className=\"flex w-full items-center justify-between px-3 py-2 hover:bg-gray-50\"\n                      >\n                        <span className=\"truncate text-left text-gray-800\">\n                          {item.title}\n                        </span>\n                        {item.type && (\n                          <span className=\"ml-2 rounded-full bg-gray-100 px-2 py-0.5 text-[10px] uppercase tracking-wide text-gray-500\">\n                            {item.type}\n                          </span>\n                        )}\n                      </button>\n                    </li>\n                  ))}\n                </ul>\n              </div>\n            )}\n          </div>\n        </form>\n      </div>\n    </header>\n  );\n}\n\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 616, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/yogeshmalvi/Downloads/Telegram%20Desktop/LMS%2BEcommerce/web/src/components/layout/Footer.tsx"],"sourcesContent":["\"use client\";\n\nimport Link from \"next/link\";\n\n// Common footer for landing + classes + rest of site\nexport function Footer() {\n  // TODO: Make links and content manageable by super admin via CMS collections\n  return (\n    <footer className=\"bg-gray-950 text-gray-400 pt-12 pb-6\">\n      <div className=\"container mx-auto px-4\">\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-8 pb-8 border-b border-gray-800\">\n          <div>\n            <h3 className=\"text-white font-semibold mb-3\">Veena LMS</h3>\n            <p className=\"text-sm\">\n              Unified platform to sell courses, live classes, workshops, and\n              products with a single cart and dashboard.\n            </p>\n          </div>\n          <div>\n            <h4 className=\"text-sm font-semibold text-white mb-3\">Navigation</h4>\n            <ul className=\"space-y-2 text-sm\">\n              <li>\n                <Link href=\"/\" className=\"hover:text-white\">\n                  Home\n                </Link>\n              </li>\n              <li>\n                <Link href=\"/classes\" className=\"hover:text-white\">\n                  Classes\n                </Link>\n              </li>\n              <li>\n                <Link href=\"/dashboard\" className=\"hover:text-white\">\n                  Dashboard\n                </Link>\n              </li>\n            </ul>\n          </div>\n          <div>\n            <h4 className=\"text-sm font-semibold text-white mb-3\">\n              Support & Legal\n            </h4>\n            <ul className=\"space-y-2 text-sm\">\n              <li>\n                <Link href=\"/support\" className=\"hover:text-white\">\n                  Help & Support\n                </Link>\n              </li>\n              <li>\n                <Link href=\"/terms\" className=\"hover:text-white\">\n                  Terms & Conditions\n                </Link>\n              </li>\n              <li>\n                <Link href=\"/privacy\" className=\"hover:text-white\">\n                  Privacy Policy\n                </Link>\n              </li>\n            </ul>\n          </div>\n          <div>\n            <h4 className=\"text-sm font-semibold text-white mb-3\">Contact</h4>\n            <p className=\"text-sm\">Email: hello@example.com</p>\n            <p className=\"text-sm mt-1\">Phone: +91-00000-00000</p>\n            <p className=\"text-xs text-gray-500 mt-4\">\n              Content, pricing, and availability managed by super admin.\n            </p>\n          </div>\n        </div>\n        <div className=\"flex items-center justify-between pt-4 text-xs text-gray-600\">\n          <span>¬© {new Date().getFullYear()} Veena LMS. All rights reserved.</span>\n          <span>Built on Next.js, Firebase, and AWS S3.</span>\n        </div>\n      </div>\n    </footer>\n  );\n}\n\n\n\n\n\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAKO,SAAS;IACd,6EAA6E;IAC7E,qBACE,2SAAC;QAAO,WAAU;kBAChB,cAAA,2SAAC;YAAI,WAAU;;8BACb,2SAAC;oBAAI,WAAU;;sCACb,2SAAC;;8CACC,2SAAC;oCAAG,WAAU;8CAAgC;;;;;;8CAC9C,2SAAC;oCAAE,WAAU;8CAAU;;;;;;;;;;;;sCAKzB,2SAAC;;8CACC,2SAAC;oCAAG,WAAU;8CAAwC;;;;;;8CACtD,2SAAC;oCAAG,WAAU;;sDACZ,2SAAC;sDACC,cAAA,2SAAC,oOAAI;gDAAC,MAAK;gDAAI,WAAU;0DAAmB;;;;;;;;;;;sDAI9C,2SAAC;sDACC,cAAA,2SAAC,oOAAI;gDAAC,MAAK;gDAAW,WAAU;0DAAmB;;;;;;;;;;;sDAIrD,2SAAC;sDACC,cAAA,2SAAC,oOAAI;gDAAC,MAAK;gDAAa,WAAU;0DAAmB;;;;;;;;;;;;;;;;;;;;;;;sCAM3D,2SAAC;;8CACC,2SAAC;oCAAG,WAAU;8CAAwC;;;;;;8CAGtD,2SAAC;oCAAG,WAAU;;sDACZ,2SAAC;sDACC,cAAA,2SAAC,oOAAI;gDAAC,MAAK;gDAAW,WAAU;0DAAmB;;;;;;;;;;;sDAIrD,2SAAC;sDACC,cAAA,2SAAC,oOAAI;gDAAC,MAAK;gDAAS,WAAU;0DAAmB;;;;;;;;;;;sDAInD,2SAAC;sDACC,cAAA,2SAAC,oOAAI;gDAAC,MAAK;gDAAW,WAAU;0DAAmB;;;;;;;;;;;;;;;;;;;;;;;sCAMzD,2SAAC;;8CACC,2SAAC;oCAAG,WAAU;8CAAwC;;;;;;8CACtD,2SAAC;oCAAE,WAAU;8CAAU;;;;;;8CACvB,2SAAC;oCAAE,WAAU;8CAAe;;;;;;8CAC5B,2SAAC;oCAAE,WAAU;8CAA6B;;;;;;;;;;;;;;;;;;8BAK9C,2SAAC;oBAAI,WAAU;;sCACb,2SAAC;;gCAAK;gCAAG,IAAI,OAAO,WAAW;gCAAG;;;;;;;sCAClC,2SAAC;sCAAK;;;;;;;;;;;;;;;;;;;;;;;AAKhB"}},
    {"offset": {"line": 888, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/yogeshmalvi/Downloads/Telegram%20Desktop/LMS%2BEcommerce/web/src/components/layout/CategoryNavigation.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport Link from \"next/link\";\nimport { collection, query, where, getDocs, orderBy } from \"firebase/firestore\";\nimport { db } from \"@/lib/firebaseClient\";\nimport type { Category } from \"@/types/store\";\n\nexport function CategoryNavigation() {\n  const [categories, setCategories] = useState<Category[]>([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    loadCategories();\n  }, []);\n\n  const loadCategories = async () => {\n    try {\n      // Try with orderBy first (requires composite index)\n      let q;\n      let snapshot;\n      let categoriesData: Category[] = [];\n      \n      try {\n        q = query(\n          collection(db, \"categories\"),\n          where(\"status\", \"==\", \"active\"),\n          orderBy(\"orderIndex\", \"asc\")\n        );\n        snapshot = await getDocs(q);\n      } catch (error: any) {\n        console.warn(\"Index error, trying fallback query:\", error);\n        \n        // If query fails due to missing index, try without orderBy\n        try {\n          q = query(\n            collection(db, \"categories\"),\n            where(\"status\", \"==\", \"active\")\n          );\n          snapshot = await getDocs(q);\n        } catch (fallbackError: any) {\n          // If that also fails, get all categories and filter client-side\n          console.warn(\"Status filter failed, getting all categories:\", fallbackError);\n          q = query(collection(db, \"categories\"));\n          snapshot = await getDocs(q);\n        }\n      }\n      \n      snapshot.forEach((doc) => {\n        const data = doc.data();\n        // Include if status is active or if status field doesn't exist (default to active)\n        if (!data.status || data.status === \"active\") {\n          categoriesData.push({ \n            categoryId: doc.id, \n            ...data,\n            orderIndex: data.orderIndex || 999,\n            status: data.status || \"active\"\n          } as Category);\n        }\n      });\n      \n      // Sort manually\n      categoriesData.sort((a, b) => (a.orderIndex || 999) - (b.orderIndex || 999));\n      setCategories(categoriesData);\n      console.log(\"‚úÖ Categories loaded:\", categoriesData.length, categoriesData);\n    } catch (error: any) {\n      console.error(\"‚ùå Error loading categories:\", error);\n      setCategories([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Always render the component so it's visible\n  return (\n    <div className=\"bg-white border-b-2 border-gray-300 shadow-md py-4\">\n      <div className=\"container mx-auto px-4\">\n        {loading ? (\n          <div className=\"flex items-center justify-center py-2\">\n            <span className=\"text-sm text-gray-600\">Loading categories...</span>\n          </div>\n        ) : categories.length === 0 ? (\n          <div className=\"flex items-center justify-center py-2\">\n            <span className=\"text-sm text-gray-600 bg-yellow-50 px-4 py-2 rounded border border-yellow-200\">\n              No categories found. <a href=\"/admin/store-items/categories/new\" className=\"text-blue-600 underline\">Create categories in admin panel</a>\n            </span>\n          </div>\n        ) : (\n          <nav className=\"flex items-center gap-4 md:gap-6 overflow-x-auto pb-1 hide-scrollbar\">\n            {categories.map((category) => (\n              <Link\n                key={category.categoryId}\n                href={`/category/${category.slug || category.categoryId}`}\n                className=\"text-sm md:text-base font-semibold text-gray-800 hover:text-blue-600 whitespace-nowrap transition-colors px-3 py-2 rounded-md hover:bg-blue-50 flex-shrink-0 border border-transparent hover:border-blue-200\"\n              >\n                {category.name}\n              </Link>\n            ))}\n          </nav>\n        )}\n      </div>\n    </div>\n  );\n}\n\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AACA;AALA;;;;;;AAQO,SAAS;IACd,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,8QAAQ,EAAa,EAAE;IAC3D,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,8QAAQ,EAAC;IAEvC,IAAA,+QAAS,EAAC;QACR;IACF,GAAG,EAAE;IAEL,MAAM,iBAAiB;QACrB,IAAI;YACF,oDAAoD;YACpD,IAAI;YACJ,IAAI;YACJ,IAAI,iBAA6B,EAAE;YAEnC,IAAI;gBACF,IAAI,IAAA,uOAAK,EACP,IAAA,4OAAU,EAAC,+LAAE,EAAE,eACf,IAAA,uOAAK,EAAC,UAAU,MAAM,WACtB,IAAA,yOAAO,EAAC,cAAc;gBAExB,WAAW,MAAM,IAAA,yOAAO,EAAC;YAC3B,EAAE,OAAO,OAAY;gBACnB,QAAQ,IAAI,CAAC,uCAAuC;gBAEpD,2DAA2D;gBAC3D,IAAI;oBACF,IAAI,IAAA,uOAAK,EACP,IAAA,4OAAU,EAAC,+LAAE,EAAE,eACf,IAAA,uOAAK,EAAC,UAAU,MAAM;oBAExB,WAAW,MAAM,IAAA,yOAAO,EAAC;gBAC3B,EAAE,OAAO,eAAoB;oBAC3B,gEAAgE;oBAChE,QAAQ,IAAI,CAAC,iDAAiD;oBAC9D,IAAI,IAAA,uOAAK,EAAC,IAAA,4OAAU,EAAC,+LAAE,EAAE;oBACzB,WAAW,MAAM,IAAA,yOAAO,EAAC;gBAC3B;YACF;YAEA,SAAS,OAAO,CAAC,CAAC;gBAChB,MAAM,OAAO,IAAI,IAAI;gBACrB,mFAAmF;gBACnF,IAAI,CAAC,KAAK,MAAM,IAAI,KAAK,MAAM,KAAK,UAAU;oBAC5C,eAAe,IAAI,CAAC;wBAClB,YAAY,IAAI,EAAE;wBAClB,GAAG,IAAI;wBACP,YAAY,KAAK,UAAU,IAAI;wBAC/B,QAAQ,KAAK,MAAM,IAAI;oBACzB;gBACF;YACF;YAEA,gBAAgB;YAChB,eAAe,IAAI,CAAC,CAAC,GAAG,IAAM,CAAC,EAAE,UAAU,IAAI,GAAG,IAAI,CAAC,EAAE,UAAU,IAAI,GAAG;YAC1E,cAAc;YACd,QAAQ,GAAG,CAAC,wBAAwB,eAAe,MAAM,EAAE;QAC7D,EAAE,OAAO,OAAY;YACnB,QAAQ,KAAK,CAAC,+BAA+B;YAC7C,cAAc,EAAE;QAClB,SAAU;YACR,WAAW;QACb;IACF;IAEA,8CAA8C;IAC9C,qBACE,2SAAC;QAAI,WAAU;kBACb,cAAA,2SAAC;YAAI,WAAU;sBACZ,wBACC,2SAAC;gBAAI,WAAU;0BACb,cAAA,2SAAC;oBAAK,WAAU;8BAAwB;;;;;;;;;;uBAExC,WAAW,MAAM,KAAK,kBACxB,2SAAC;gBAAI,WAAU;0BACb,cAAA,2SAAC;oBAAK,WAAU;;wBAAgF;sCACzE,2SAAC;4BAAE,MAAK;4BAAoC,WAAU;sCAA0B;;;;;;;;;;;;;;;;qCAIzG,2SAAC;gBAAI,WAAU;0BACZ,WAAW,GAAG,CAAC,CAAC,yBACf,2SAAC,oOAAI;wBAEH,MAAM,CAAC,UAAU,EAAE,SAAS,IAAI,IAAI,SAAS,UAAU,EAAE;wBACzD,WAAU;kCAET,SAAS,IAAI;uBAJT,SAAS,UAAU;;;;;;;;;;;;;;;;;;;;AAYxC"}},
    {"offset": {"line": 1030, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/yogeshmalvi/Downloads/Telegram%20Desktop/LMS%2BEcommerce/web/src/components/home/NotificationStrip.tsx"],"sourcesContent":["\"use client\";\n\n// Auto shows: New launches, Upcoming live classes, Limited offers\nexport function NotificationStrip() {\n  // TODO: Query Firestore for active notifications\n  const notifications = [\n    { id: \"1\", text: \"üéâ New Course Launch: Advanced Photography\", type: \"new_launch\" },\n    { id: \"2\", text: \"üìÖ Live Class Tomorrow: Digital Marketing Basics\", type: \"live_class\" },\n    { id: \"3\", text: \"‚ö° Limited Offer: 50% off on all workshops this week!\", type: \"offer\" },\n  ];\n\n  return (\n    <div className=\"bg-blue-600 text-white py-2\">\n      <div className=\"container mx-auto px-4\">\n        <div className=\"flex items-center justify-center gap-4 overflow-x-auto\">\n          {notifications.map((notif) => (\n            <span key={notif.id} className=\"text-sm whitespace-nowrap\">\n              {notif.text}\n            </span>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n}\n\n\n\n\n"],"names":[],"mappings":";;;;;AAAA;;AAGO,SAAS;IACd,iDAAiD;IACjD,MAAM,gBAAgB;QACpB;YAAE,IAAI;YAAK,MAAM;YAA8C,MAAM;QAAa;QAClF;YAAE,IAAI;YAAK,MAAM;YAAoD,MAAM;QAAa;QACxF;YAAE,IAAI;YAAK,MAAM;YAAwD,MAAM;QAAQ;KACxF;IAED,qBACE,2SAAC;QAAI,WAAU;kBACb,cAAA,2SAAC;YAAI,WAAU;sBACb,cAAA,2SAAC;gBAAI,WAAU;0BACZ,cAAc,GAAG,CAAC,CAAC,sBAClB,2SAAC;wBAAoB,WAAU;kCAC5B,MAAM,IAAI;uBADF,MAAM,EAAE;;;;;;;;;;;;;;;;;;;;AAQ/B"}},
    {"offset": {"line": 1090, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/yogeshmalvi/Downloads/Telegram%20Desktop/LMS%2BEcommerce/web/src/lib/s3ImageHelper.ts"],"sourcesContent":["/**\n * Helper function to get signed S3 URLs for images\n * This is needed because S3 objects with KMS encryption require signed URLs\n */\n\nexport async function getSignedImageUrl(imageUrl: string): Promise<string> {\n  // If it's not an S3 URL, return as-is\n  if (!imageUrl || (!imageUrl.includes(\"s3\") && !imageUrl.includes(\"amazonaws.com\"))) {\n    return imageUrl;\n  }\n\n  try {\n    // Pass the full URL as-is; the API will extract the S3 object key\n    const response = await fetch(`/api/s3-signed-url?key=${encodeURIComponent(imageUrl)}`);\n    \n    if (!response.ok) {\n      const errorText = await response.text();\n      console.error(\"Failed to get signed URL:\", {\n        status: response.status,\n        statusText: response.statusText,\n        error: errorText,\n        imageUrl: imageUrl\n      });\n      return imageUrl; // Fallback to original URL\n    }\n\n    const data = await response.json();\n    if (data.error) {\n      console.error(\"Signed URL API error:\", data.error);\n      return imageUrl; // Fallback to original URL\n    }\n    return data.url || imageUrl;\n  } catch (error) {\n    console.error(\"Error getting signed URL:\", error);\n    return imageUrl; // Fallback to original URL\n  }\n}\n\n/**\n * Get signed URLs for multiple images\n */\nexport async function getSignedImageUrls(imageUrls: string[]): Promise<string[]> {\n  return Promise.all(imageUrls.map(url => getSignedImageUrl(url)));\n}\n\n"],"names":[],"mappings":"AAAA;;;CAGC;;;;;;AAEM,eAAe,kBAAkB,QAAgB;IACtD,sCAAsC;IACtC,IAAI,CAAC,YAAa,CAAC,SAAS,QAAQ,CAAC,SAAS,CAAC,SAAS,QAAQ,CAAC,kBAAmB;QAClF,OAAO;IACT;IAEA,IAAI;QACF,kEAAkE;QAClE,MAAM,WAAW,MAAM,MAAM,CAAC,uBAAuB,EAAE,mBAAmB,WAAW;QAErF,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,MAAM,YAAY,MAAM,SAAS,IAAI;YACrC,QAAQ,KAAK,CAAC,6BAA6B;gBACzC,QAAQ,SAAS,MAAM;gBACvB,YAAY,SAAS,UAAU;gBAC/B,OAAO;gBACP,UAAU;YACZ;YACA,OAAO,UAAU,2BAA2B;QAC9C;QAEA,MAAM,OAAO,MAAM,SAAS,IAAI;QAChC,IAAI,KAAK,KAAK,EAAE;YACd,QAAQ,KAAK,CAAC,yBAAyB,KAAK,KAAK;YACjD,OAAO,UAAU,2BAA2B;QAC9C;QACA,OAAO,KAAK,GAAG,IAAI;IACrB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,6BAA6B;QAC3C,OAAO,UAAU,2BAA2B;IAC9C;AACF;AAKO,eAAe,mBAAmB,SAAmB;IAC1D,OAAO,QAAQ,GAAG,CAAC,UAAU,GAAG,CAAC,CAAA,MAAO,kBAAkB;AAC5D"}},
    {"offset": {"line": 1135, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/yogeshmalvi/Downloads/Telegram%20Desktop/LMS%2BEcommerce/web/src/components/common/S3Image.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { getSignedImageUrl } from \"@/lib/s3ImageHelper\";\n\ninterface S3ImageProps {\n  src: string;\n  alt: string;\n  className?: string;\n  fallback?: React.ReactNode;\n}\n\nexport function S3Image({ src, alt, className = \"\", fallback }: S3ImageProps) {\n  const [imageUrl, setImageUrl] = useState<string>(src);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(false);\n  const [errorMessage, setErrorMessage] = useState<string>(\"\");\n\n  useEffect(() => {\n    // Handle empty or invalid src\n    if (!src || src.trim() === \"\") {\n      setError(true);\n      setLoading(false);\n      return;\n    }\n\n    // Only get signed URL if it's an S3 URL\n    if (src.includes(\"s3\") || src.includes(\"amazonaws.com\")) {\n      getSignedImageUrl(src)\n        .then((signedUrl) => {\n          setImageUrl(signedUrl);\n          setLoading(false);\n        })\n        .catch((err) => {\n          // Fallback to original URL - might work if bucket has public read access\n          setImageUrl(src);\n          setLoading(false);\n        });\n    } else {\n      // Not an S3 URL, use as-is\n      setImageUrl(src);\n      setLoading(false);\n    }\n  }, [src]);\n\n  if (error) {\n    return (\n      <div className={className}>\n        {fallback || (\n          <div className=\"w-full h-full flex items-center justify-center text-gray-400 bg-gray-100\">\n            <svg className=\"w-16 h-16\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\" />\n            </svg>\n          </div>\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <>\n      <img\n        src={imageUrl}\n        alt={alt}\n        className={className}\n        onError={(e) => {\n          // Silently handle image load errors - don't spam console\n          if (process.env.NODE_ENV === \"development\") {\n            console.warn(\"S3Image: Image failed to load\", imageUrl);\n          }\n          setError(true);\n          setErrorMessage(\"Failed to load image\");\n        }}\n        onLoad={() => {\n          setLoading(false);\n          setError(false);\n        }}\n        style={{ opacity: loading ? 0.5 : 1 }}\n      />\n      {error && process.env.NODE_ENV === \"development\" && (\n        <div className=\"text-xs text-red-500 mt-1\">\n          Image load failed. Check console for details.\n        </div>\n      )}\n    </>\n  );\n}\n\n\n\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAYO,SAAS,QAAQ,EAAE,GAAG,EAAE,GAAG,EAAE,YAAY,EAAE,EAAE,QAAQ,EAAgB;IAC1E,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,8QAAQ,EAAS;IACjD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,8QAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,8QAAQ,EAAC;IACnC,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,8QAAQ,EAAS;IAEzD,IAAA,+QAAS,EAAC;QACR,8BAA8B;QAC9B,IAAI,CAAC,OAAO,IAAI,IAAI,OAAO,IAAI;YAC7B,SAAS;YACT,WAAW;YACX;QACF;QAEA,wCAAwC;QACxC,IAAI,IAAI,QAAQ,CAAC,SAAS,IAAI,QAAQ,CAAC,kBAAkB;YACvD,IAAA,6MAAiB,EAAC,KACf,IAAI,CAAC,CAAC;gBACL,YAAY;gBACZ,WAAW;YACb,GACC,KAAK,CAAC,CAAC;gBACN,yEAAyE;gBACzE,YAAY;gBACZ,WAAW;YACb;QACJ,OAAO;YACL,2BAA2B;YAC3B,YAAY;YACZ,WAAW;QACb;IACF,GAAG;QAAC;KAAI;IAER,IAAI,OAAO;QACT,qBACE,2SAAC;YAAI,WAAW;sBACb,0BACC,2SAAC;gBAAI,WAAU;0BACb,cAAA,2SAAC;oBAAI,WAAU;oBAAY,MAAK;oBAAO,QAAO;oBAAe,SAAQ;8BACnE,cAAA,2SAAC;wBAAK,eAAc;wBAAQ,gBAAe;wBAAQ,aAAa;wBAAG,GAAE;;;;;;;;;;;;;;;;;;;;;IAMjF;IAEA,qBACE;;0BACE,2SAAC;gBACC,KAAK;gBACL,KAAK;gBACL,WAAW;gBACX,SAAS,CAAC;oBACR,yDAAyD;oBACzD,wCAA4C;wBAC1C,QAAQ,IAAI,CAAC,iCAAiC;oBAChD;oBACA,SAAS;oBACT,gBAAgB;gBAClB;gBACA,QAAQ;oBACN,WAAW;oBACX,SAAS;gBACX;gBACA,OAAO;oBAAE,SAAS,UAAU,MAAM;gBAAE;;;;;;YAErC,SAAS,oDAAyB,+BACjC,2SAAC;gBAAI,WAAU;0BAA4B;;;;;;;;AAMnD"}},
    {"offset": {"line": 1253, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/yogeshmalvi/Downloads/Telegram%20Desktop/LMS%2BEcommerce/web/src/app/item/%5Bid%5D/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { useParams, useRouter } from \"next/navigation\";\nimport Link from \"next/link\";\nimport { doc, getDoc, collection, query, where, getDocs, addDoc, serverTimestamp } from \"firebase/firestore\";\nimport { auth, db } from \"@/lib/firebaseClient\";\nimport { Header } from \"@/components/layout/Header\";\nimport { Footer } from \"@/components/layout/Footer\";\nimport { CategoryNavigation } from \"@/components/layout/CategoryNavigation\";\nimport { NotificationStrip } from \"@/components/home/NotificationStrip\";\nimport { S3Image } from \"@/components/common/S3Image\";\nimport type { StoreItem } from \"@/types/store\";\n\nexport default function ProductDetailPage() {\n  const params = useParams();\n  const router = useRouter();\n  const productId = params?.id as string;\n  const [product, setProduct] = useState<StoreItem | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [selectedImageIndex, setSelectedImageIndex] = useState(0);\n  const [recommendedProducts, setRecommendedProducts] = useState<StoreItem[]>([]);\n  const [recommendedImages, setRecommendedImages] = useState<Record<string, string>>({});\n  const [addingToCart, setAddingToCart] = useState(false);\n  const [buying, setBuying] = useState(false);\n  const [wishlistLoading, setWishlistLoading] = useState(false);\n\n  useEffect(() => {\n    if (!productId) {\n      console.error(\"No product ID provided\");\n      setLoading(false);\n      return;\n    }\n    loadProduct();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [productId]);\n\n  const loadProduct = async () => {\n    try {\n      setLoading(true);\n      console.log(\"Loading product with ID:\", productId);\n      \n      if (!productId || productId.trim() === \"\") {\n        console.error(\"Invalid product ID:\", productId);\n        setProduct(null);\n        setLoading(false);\n        return;\n      }\n      \n      let productDoc = null;\n      \n      // Try 1: Search by Firestore document ID\n      try {\n        const productDocRef = doc(db, \"store_items\", productId);\n        const docSnap = await getDoc(productDocRef);\n        if (docSnap.exists()) {\n          productDoc = docSnap;\n          console.log(\"Product found by document ID\");\n        }\n      } catch (error) {\n        console.log(\"Product not found by document ID, trying itemId field\");\n      }\n      \n      // Try 2: Search by itemId field if document ID didn't work\n      if (!productDoc) {\n        try {\n          const itemsQuery = query(\n            collection(db, \"store_items\"),\n            where(\"itemId\", \"==\", productId)\n          );\n          const itemsSnapshot = await getDocs(itemsQuery);\n          \n          if (!itemsSnapshot.empty) {\n            productDoc = itemsSnapshot.docs[0];\n            console.log(\"Product found by itemId field\");\n          }\n        } catch (error) {\n          console.error(\"Error searching by itemId field:\", error);\n        }\n      }\n      \n      // Try 3: Also try searching by old field name item_id\n      if (!productDoc) {\n        try {\n          const itemsQuery = query(\n            collection(db, \"store_items\"),\n            where(\"item_id\", \"==\", productId)\n          );\n          const itemsSnapshot = await getDocs(itemsQuery);\n          \n          if (!itemsSnapshot.empty) {\n            productDoc = itemsSnapshot.docs[0];\n            console.log(\"Product found by item_id field\");\n          }\n        } catch (error) {\n          console.error(\"Error searching by item_id field:\", error);\n        }\n      }\n      \n      if (!productDoc || !productDoc.exists()) {\n        console.error(\"Product not found in Firestore:\", {\n          productId,\n          collection: \"store_items\",\n          searchedBy: [\"document ID\", \"itemId field\", \"item_id field\"]\n        });\n        setProduct(null);\n        setLoading(false);\n        return;\n      }\n\n      const data = productDoc.data();\n      console.log(\"Product data loaded:\", data);\n      console.log(\"Firestore document ID:\", productDoc.id);\n      \n      // Normalize images - handle both array and single value, and both field names\n      let normalizedImages: string[] = [];\n      if (data.images) {\n        normalizedImages = Array.isArray(data.images) ? data.images : [data.images];\n      } else if (data.image) {\n        normalizedImages = Array.isArray(data.image) ? data.image : [data.image];\n      }\n      \n      // Normalize pricing\n      const basePrice = data.basePrice || data.price || 0;\n      const compareAtPrice = data.compareAtPrice || data.compare_at_price || data.discount_price || null;\n      \n      const productData: StoreItem = {\n        itemId: productDoc.id,\n        ...data,\n        images: normalizedImages,\n        basePrice: basePrice,\n        compareAtPrice: compareAtPrice,\n      } as StoreItem;\n\n      setProduct(productData);\n      \n      // Load recommended products (products from same category, excluding current product)\n      if (productData.categoryId) {\n        loadRecommendedProducts(productData.categoryId, productData.itemId);\n      }\n    } catch (error) {\n      console.error(\"Error loading product:\", error);\n      setProduct(null);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleAddToCart = async () => {\n    if (!product) return;\n    if (product.trackInventory && product.stockQuantity === 0) return;\n\n    const user = auth.currentUser;\n    if (!user) {\n      router.push(`/login?redirect=/item/${product.itemId}`);\n      return;\n    }\n\n    try {\n      setAddingToCart(true);\n      await addDoc(collection(db, \"carts\"), {\n        userId: user.uid,\n        itemId: product.itemId,\n        quantity: 1,\n        addedAt: serverTimestamp(),\n        // Basic denormalized info for easier display\n        title: product.title,\n        price: product.basePrice,\n        image: product.images?.[0] || null,\n        type: product.itemType || product.type || \"product\",\n      });\n      alert(\"Added to cart.\");\n    } catch (error) {\n      console.error(\"Failed to add to cart:\", error);\n      alert(\"Failed to add to cart. Please try again.\");\n    } finally {\n      setAddingToCart(false);\n    }\n  };\n\n  const handleBuyNow = async () => {\n    if (!product) return;\n    if (product.trackInventory && product.stockQuantity === 0) return;\n\n    const user = auth.currentUser;\n    if (!user) {\n      router.push(`/login?redirect=/item/${product.itemId}`);\n      return;\n    }\n\n    try {\n      setBuying(true);\n      // For now, just ensure it's in the cart, then go to a generic checkout/cart page\n      await addDoc(collection(db, \"carts\"), {\n        userId: user.uid,\n        itemId: product.itemId,\n        quantity: 1,\n        addedAt: serverTimestamp(),\n        title: product.title,\n        price: product.basePrice,\n        image: product.images?.[0] || null,\n        type: product.itemType || product.type || \"product\",\n        source: \"buy_now\",\n      });\n      router.push(\"/cart\");\n    } catch (error) {\n      console.error(\"Failed to start checkout:\", error);\n      alert(\"Failed to start checkout. Please try again.\");\n    } finally {\n      setBuying(false);\n    }\n  };\n\n  const handleAddToWishlist = async () => {\n    if (!product) return;\n    const user = auth.currentUser;\n\n    if (!user) {\n      router.push(`/login?redirect=/item/${product.itemId}`);\n      return;\n    }\n\n    try {\n      setWishlistLoading(true);\n      await addDoc(collection(db, \"wishlists\"), {\n        userId: user.uid,\n        itemId: product.itemId,\n        type: \"product\",\n        createdAt: serverTimestamp(),\n      });\n      alert(\"Product added to your wishlist.\");\n    } catch (error) {\n      console.error(\"Failed to add to wishlist:\", error);\n      alert(\"Failed to add to wishlist. Please try again.\");\n    } finally {\n      setWishlistLoading(false);\n    }\n  };\n\n  const loadRecommendedProducts = async (categoryId: string, excludeItemId: string) => {\n    try {\n      // Simple fetch: get all items, then filter/sort in memory to avoid index issues\n      const snapshot = await getDocs(collection(db, \"store_items\"));\n      const products: StoreItem[] = [];\n      const imageMap: Record<string, string> = {};\n      \n      snapshot.forEach((doc) => {\n        const data = doc.data();\n\n        // Filter: same category, active status (or missing), and not the current product\n        if (\n          doc.id !== excludeItemId &&\n          data.categoryId === categoryId &&\n          (!data.status || data.status === \"active\")\n        ) {\n          // Normalize images\n          let normalizedImages: string[] = [];\n          if (data.images) {\n            normalizedImages = Array.isArray(data.images) ? data.images : [data.images];\n          } else if (data.image) {\n            normalizedImages = Array.isArray(data.image) ? data.image : [data.image];\n          }\n\n          const productItem: StoreItem = {\n            itemId: doc.id,\n            ...data,\n            images: normalizedImages,\n            basePrice: data.basePrice || data.price || 0,\n            compareAtPrice:\n              data.compareAtPrice || data.compare_at_price || data.discount_price || null,\n          } as StoreItem;\n\n          products.push(productItem);\n\n          // Get first image for each product\n          if (normalizedImages.length > 0) {\n            imageMap[productItem.itemId] = normalizedImages[0];\n          }\n        }\n      });\n      \n      // Sort client-side by createdAt desc if present\n      products.sort((a, b) => {\n        const dateA = (a as any).createdAt?.toMillis?.() || 0;\n        const dateB = (b as any).createdAt?.toMillis?.() || 0;\n        return dateB - dateA;\n      });\n      \n      // Limit to 4 products\n      const limitedProducts = products.slice(0, 4);\n      \n      setRecommendedProducts(limitedProducts);\n      setRecommendedImages(imageMap);\n    } catch (error) {\n      console.error(\"Error loading recommended products:\", error);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-gray-50\">\n        <Header />\n        <NotificationStrip />\n        <CategoryNavigation />\n        <div className=\"container mx-auto px-4 py-20\">\n          <div className=\"text-center\">\n            <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto\"></div>\n            <p className=\"mt-4 text-gray-600\">Loading product...</p>\n          </div>\n        </div>\n        <Footer />\n      </div>\n    );\n  }\n\n  if (!product) {\n    return (\n      <div className=\"min-h-screen bg-gray-50\">\n        <Header />\n        <NotificationStrip />\n        <CategoryNavigation />\n        <div className=\"container mx-auto px-4 py-20\">\n          <div className=\"text-center\">\n            <h1 className=\"text-4xl font-bold text-gray-900 mb-4\">Product Not Found</h1>\n            <p className=\"text-gray-600 mb-2\">The product you're looking for doesn't exist.</p>\n            {productId && (\n              <p className=\"text-sm text-gray-500 mb-8\">\n                Product ID: <code className=\"bg-gray-200 px-2 py-1 rounded\">{productId}</code>\n              </p>\n            )}\n            <div className=\"flex gap-4 justify-center\">\n              <Link\n                href=\"/\"\n                className=\"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\n              >\n                Go Back Home\n              </Link>\n              <button\n                onClick={() => router.back()}\n                className=\"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors\"\n              >\n                Go Back\n              </button>\n            </div>\n          </div>\n        </div>\n        <Footer />\n      </div>\n    );\n  }\n\n  const images = product.images || [];\n  const mainImage = images[selectedImageIndex] || images[0] || \"\";\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <Header />\n      <NotificationStrip />\n      <CategoryNavigation />\n      \n      <main className=\"container mx-auto px-4 py-8\">\n        {/* Breadcrumbs */}\n        <nav className=\"mb-6 text-sm\">\n          <ol className=\"flex items-center space-x-2 text-gray-600\">\n            <li><Link href=\"/\" className=\"hover:text-blue-600\">Home</Link></li>\n            <li>/</li>\n            <li><Link href=\"/\" className=\"hover:text-blue-600\">Products</Link></li>\n            <li>/</li>\n            <li className=\"text-gray-900\">{product.title}</li>\n          </ol>\n        </nav>\n\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8 bg-white rounded-lg shadow-lg p-6\">\n          {/* Left Side: Product Images */}\n          <div className=\"space-y-4\">\n            {/* Main Big Image */}\n            <div className=\"aspect-square bg-gray-100 rounded-lg overflow-hidden\">\n              {mainImage ? (\n                <S3Image\n                  src={mainImage}\n                  alt={product.title}\n                  className=\"w-full h-full object-cover\"\n                />\n              ) : (\n                <div className=\"w-full h-full flex items-center justify-center text-gray-400\">\n                  <svg className=\"w-24 h-24\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\" />\n                  </svg>\n                </div>\n              )}\n            </div>\n\n            {/* Thumbnail Images */}\n            {images.length > 1 && (\n              <div className=\"grid grid-cols-4 gap-2\">\n                {images.map((img, index) => (\n                  <button\n                    key={index}\n                    onClick={() => setSelectedImageIndex(index)}\n                    className={`aspect-square rounded-lg overflow-hidden border-2 transition-all ${\n                      selectedImageIndex === index\n                        ? \"border-blue-600 ring-2 ring-blue-200\"\n                        : \"border-gray-200 hover:border-gray-300\"\n                    }`}\n                  >\n                    <S3Image\n                      src={img}\n                      alt={`${product.title} ${index + 1}`}\n                      className=\"w-full h-full object-cover\"\n                    />\n                  </button>\n                ))}\n              </div>\n            )}\n          </div>\n\n          {/* Right Side: Product Details */}\n          <div className=\"space-y-6\">\n            {/* Product Type Badge */}\n            {product.itemType && (\n              <span className=\"inline-block bg-blue-600 text-white text-xs px-3 py-1 rounded-full uppercase font-semibold\">\n                {product.itemType.replace(\"_\", \" \")}\n              </span>\n            )}\n\n            {/* Title */}\n            <h1 className=\"text-3xl md:text-4xl font-bold text-gray-900\">\n              {product.title}\n            </h1>\n\n            {/* Pricing */}\n            <div className=\"space-y-2 py-4 border-y border-gray-200\">\n              {product.compareAtPrice && product.compareAtPrice > product.basePrice && (\n                <div className=\"flex items-center gap-3\">\n                  <span className=\"text-2xl text-gray-500 line-through\">\n                    ‚Çπ{product.compareAtPrice.toLocaleString()}\n                  </span>\n                  <span className=\"text-sm bg-red-100 text-red-600 font-semibold px-2 py-1 rounded\">\n                    {Math.round(((product.compareAtPrice - product.basePrice) / product.compareAtPrice) * 100)}% OFF\n                  </span>\n                </div>\n              )}\n              <div className=\"text-4xl font-bold text-blue-600\">\n                ‚Çπ{product.basePrice.toLocaleString()}\n              </div>\n            </div>\n\n            {/* Short Description */}\n            {product.shortDescription && (\n              <p className=\"text-lg text-gray-600\">{product.shortDescription}</p>\n            )}\n\n            {/* Stock Status */}\n            {product.trackInventory && product.stockQuantity !== undefined && (\n              <div className=\"flex items-center gap-2\">\n                {product.stockQuantity > 0 ? (\n                  <>\n                    <span className=\"w-3 h-3 bg-green-500 rounded-full\"></span>\n                    <span className=\"text-green-600 font-semibold\">\n                      {product.stockQuantity} in stock\n                    </span>\n                  </>\n                ) : (\n                  <>\n                    <span className=\"w-3 h-3 bg-red-500 rounded-full\"></span>\n                    <span className=\"text-red-600 font-semibold\">Out of stock</span>\n                  </>\n                )}\n              </div>\n            )}\n\n            {/* Action Buttons */}\n            <div className=\"space-y-3 pt-4\">\n              <div className=\"flex gap-3\">\n                <button\n                  type=\"button\"\n                  onClick={handleAddToCart}\n                  disabled={addingToCart || (product.trackInventory && product.stockQuantity === 0)}\n                  className={`flex-1 py-4 px-6 rounded-lg font-semibold text-lg transition-colors ${\n                    product.trackInventory && product.stockQuantity === 0\n                      ? \"bg-gray-300 text-gray-500 cursor-not-allowed\"\n                      : \"bg-blue-600 text-white hover:bg-blue-700\"\n                  }`}\n                >\n                  {product.trackInventory && product.stockQuantity === 0\n                    ? \"Out of Stock\"\n                    : addingToCart\n                    ? \"Adding...\"\n                    : \"Add to Cart\"}\n                </button>\n                <button\n                  type=\"button\"\n                  onClick={handleAddToWishlist}\n                  className=\"px-4 py-4 rounded-lg border-2 border-gray-300 hover:border-gray-400 transition-colors\"\n                  title=\"Add to Wishlist\"\n                  disabled={wishlistLoading}\n                >\n                  <svg className=\"w-6 h-6 text-gray-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z\" />\n                  </svg>\n                </button>\n              </div>\n              <button\n                type=\"button\"\n                onClick={handleBuyNow}\n                disabled={buying || (product.trackInventory && product.stockQuantity === 0)}\n                className=\"w-full py-4 px-6 rounded-lg font-semibold text-lg border-2 border-blue-600 text-blue-600 hover:bg-blue-50 transition-colors disabled:opacity-60 disabled:cursor-not-allowed\"\n              >\n                {product.trackInventory && product.stockQuantity === 0\n                  ? \"Out of Stock\"\n                  : buying\n                  ? \"Processing...\"\n                  : \"Buy Now\"}\n              </button>\n            </div>\n\n            {/* Full Description */}\n            {product.fullDescription && (\n              <div className=\"pt-6 border-t\">\n                <h2 className=\"text-xl font-bold text-gray-900 mb-3\">Description</h2>\n                <div className=\"text-gray-700 whitespace-pre-wrap leading-relaxed\">\n                  {product.fullDescription}\n                </div>\n              </div>\n            )}\n\n            {/* Additional Details */}\n            {(product.material || product.dimensions || product.warranty) && (\n              <div className=\"pt-6 border-t space-y-2\">\n                {product.material && (\n                  <div className=\"flex\">\n                    <span className=\"font-semibold text-gray-700 w-32\">Material:</span>\n                    <span className=\"text-gray-600\">{product.material}</span>\n                  </div>\n                )}\n                {product.dimensions && (\n                  <div className=\"flex\">\n                    <span className=\"font-semibold text-gray-700 w-32\">Dimensions:</span>\n                    <span className=\"text-gray-600\">{product.dimensions}</span>\n                  </div>\n                )}\n                {product.warranty && (\n                  <div className=\"flex\">\n                    <span className=\"font-semibold text-gray-700 w-32\">Warranty:</span>\n                    <span className=\"text-gray-600\">{product.warranty}</span>\n                  </div>\n                )}\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* Recommended for You Section */}\n        {recommendedProducts.length > 0 && (\n          <section className=\"mt-12\">\n            <h2 className=\"text-2xl md:text-3xl font-bold text-gray-900 mb-6\">Recommended for You</h2>\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6\">\n              {recommendedProducts.map((recProduct) => (\n                <Link\n                  key={recProduct.itemId}\n                  href={`/item/${recProduct.itemId}`}\n                  className=\"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow\"\n                >\n                  {/* Product Image */}\n                  <div className=\"aspect-square bg-gray-200 relative overflow-hidden\">\n                    {recommendedImages[recProduct.itemId] ? (\n                      <S3Image\n                        src={recommendedImages[recProduct.itemId]}\n                        alt={recProduct.title}\n                        className=\"w-full h-full object-cover\"\n                      />\n                    ) : (\n                      <div className=\"w-full h-full flex items-center justify-center text-gray-400\">\n                        <svg className=\"w-16 h-16\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\" />\n                        </svg>\n                      </div>\n                    )}\n                  </div>\n\n                  {/* Product Info */}\n                  <div className=\"p-4\">\n                    <h3 className=\"font-semibold text-lg text-gray-900 mb-2 line-clamp-2\">\n                      {recProduct.title}\n                    </h3>\n                    {recProduct.shortDescription && (\n                      <p className=\"text-sm text-gray-600 mb-3 line-clamp-2\">\n                        {recProduct.shortDescription}\n                      </p>\n                    )}\n                    <div className=\"flex items-center justify-between\">\n                      {recProduct.compareAtPrice && recProduct.compareAtPrice > recProduct.basePrice && (\n                        <span className=\"text-sm text-gray-500 line-through mr-2\">\n                          ‚Çπ{recProduct.compareAtPrice.toLocaleString()}\n                        </span>\n                      )}\n                      <span className=\"text-xl font-bold text-blue-600\">\n                        ‚Çπ{recProduct.basePrice.toLocaleString()}\n                      </span>\n                    </div>\n                  </div>\n                </Link>\n              ))}\n            </div>\n          </section>\n        )}\n      </main>\n\n      <Footer />\n    </div>\n  );\n}\n\n"],"names":[],"mappings":"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"}}]
}