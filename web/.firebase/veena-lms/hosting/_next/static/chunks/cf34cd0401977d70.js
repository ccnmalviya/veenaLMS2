(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,58367,e=>{"use strict";var s=e.i(90454),t=e.i(17725),r=e.i(84598);e.i(53068);var a=e.i(87678),l=e.i(67006),i=e.i(73742),n=e.i(95265),d=e.i(15506),c=e.i(53384),o=e.i(11880),m=e.i(88644),x=e.i(75704);let u=(0,x.default)("arrow-up",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),h=(0,x.default)("arrow-down",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);function g(){let e=(0,r.useRouter)(),x=(0,r.useParams)().id,[g,p]=(0,t.useState)(!0),[b,y]=(0,t.useState)(!1),[j,v]=(0,t.useState)([]),[f,N]=(0,t.useState)([]),[w,D]=(0,t.useState)([]),[C,I]=(0,t.useState)([]),[S,k]=(0,t.useState)(""),[P,E]=(0,t.useState)("basic"),[R,T]=(0,t.useState)(!1),[A,L]=(0,t.useState)([]),[U,F]=(0,t.useState)(!1),[z,$]=(0,t.useState)(null),[O,q]=(0,t.useState)({title:"",description:"",orderIndex:0,unlockRule:"paid"}),[M,B]=(0,t.useState)({}),[V,G]=(0,t.useState)(new Set),[_,H]=(0,t.useState)(new Set),[Q,W]=(0,t.useState)(null),[Y,J]=(0,t.useState)(null),[K,X]=(0,t.useState)({title:"",lessonType:"video",videoSource:"s3",videoUrl:"",videoDuration:0,description:"",orderIndex:0,isFreePreview:!1,notesPdfUrl:"",transcriptText:"",completionRule:"watch_percentage",watchPercentageRequired:100,dripDelayDays:void 0}),[Z,ee]=(0,t.useState)(!1),[es,et]=(0,t.useState)(null),[er,ea]=(0,t.useState)({}),[el,ei]=(0,t.useState)(null),[en,ed]=(0,t.useState)(null),[ec,eo]=(0,t.useState)([]),[em,ex]=(0,t.useState)(!1),[eu,eh]=(0,t.useState)([]),[eg,ep]=(0,t.useState)(!1),[eb,ey]=(0,t.useState)(0),[ej,ev]=(0,t.useState)({totalEnrollments:0,activeStudents:0,completionRate:0,revenueGenerated:0,lessonDropOffData:[],engagementGraphData:[]}),[ef,eN]=(0,t.useState)(!1),[ew,eD]=(0,t.useState)({title:"",quizType:"mcq",totalMarks:100,passingMarks:50,timeLimitMinutes:void 0,attemptsAllowed:1,shuffleQuestions:!1,showResultImmediately:!0,certificateEligible:!1}),[eC,eI]=(0,t.useState)({title:"",slug:"",shortDescription:"",fullDescription:"",language:"english",category:"",subCategory:"",tags:[],level:"beginner",courseType:"video_course",instructors:[],thumbnailImage:"",promoVideoUrl:"",status:"draft",price:0,discountedPrice:void 0,discountStartDate:void 0,discountEndDate:void 0,currency:"INR",gstApplicable:!1,accessType:"lifetime",accessDurationDays:void 0,installmentEnabled:!1,affiliateCommissionPercentage:void 0,allowBundle:!1,bundleCourseIds:[],bonusContentIds:[],couponAllowed:!1,maxCouponDiscountPercentage:void 0,enrollmentType:"auto",maxEnrollments:void 0,deviceLimit:void 0,allowDownloads:!1,screenRecordingBlocked:!1,ipRestrictionEnabled:!1,certificateEnabled:!1,certificateTemplateId:void 0,certificateIssueRule:void 0,allowReviews:!0,autoApproveReviews:!1,seoTitle:"",metaDescription:"",ogImage:"",landingPageHeadline:"",ctaText:""});(0,t.useEffect)(()=>{eS(),ek(),eP(),eE(),eR()},[x]),(0,t.useEffect)(()=>{A.length>0&&A.forEach(e=>{e.id&&eU(e.id)})},[A]),(0,t.useEffect)(()=>{(async()=>{try{let e=await (0,a.getDocs)((0,a.collection)(l.db,"lessons")),s=[];e.forEach(e=>{let t=e.data();s.push({id:e.id,courseId:t.courseId||"",sectionId:t.sectionId||"",title:t.title||"Untitled Lesson"})}),I(s)}catch(e){console.error("Error loading all lessons:",e)}})()},[]),(0,t.useEffect)(()=>{Object.entries(M).forEach(([e,s])=>{s.forEach(e=>{e.id&&eJ(e.id)})})},[M]),(0,t.useEffect)(()=>{eC.tags&&k(eC.tags.join(", "))},[eC.tags]);let eS=async()=>{try{let e=await (0,a.getDocs)((0,a.collection)(l.db,"categories")),s=[];e.forEach(e=>{s.push({categoryId:e.id,...e.data()})}),v(s)}catch(e){console.error("Error loading categories:",e)}},ek=async()=>{try{let e=await (0,a.getDocs)((0,a.collection)(l.db,"users")),s=[];e.forEach(e=>{let t=e.data();s.push({id:e.id,name:t.name||t.email||"Unknown",email:t.email||""})}),N(s)}catch(e){console.error("Error loading instructors:",e)}},eP=async()=>{try{let e=await (0,a.getDocs)((0,a.collection)(l.db,"courses")),s=[];e.forEach(e=>{let t=e.data();e.id!==x&&s.push({id:e.id,title:t.title||"Untitled Course"})}),D(s)}catch(e){console.error("Error loading courses:",e)}},eE=async()=>{try{p(!0);let s=(0,a.doc)(l.db,"courses",x),t=await (0,a.getDoc)(s);if(!t.exists()){alert("Course not found"),e.push("/admin/courses");return}let r=t.data();eI({...r,id:t.id})}catch(s){console.error("Error loading course:",s),alert("Failed to load course"),e.push("/admin/courses")}finally{p(!1)}},eR=async()=>{try{let e=await (0,a.getDocs)((0,a.collection)(l.db,"sections")),s=[];e.forEach(e=>{let t=e.data();t.courseId===x&&s.push({id:e.id,...t})}),s.sort((e,s)=>(e.orderIndex||0)-(s.orderIndex||0)),L(s)}catch(e){console.error("Error loading sections:",e),L([])}},eT=async()=>{if(!O.title?.trim())return void alert("Please enter a section title");try{let e={courseId:x,title:O.title,orderIndex:O.orderIndex||A.length,unlockRule:O.unlockRule||"paid",updatedAt:(0,a.serverTimestamp)()};if(O.description&&(e.description=O.description),z?.id){let s=(0,a.doc)(l.db,"sections",z.id);await (0,a.updateDoc)(s,e),alert("Section updated successfully!")}else e.createdAt=(0,a.serverTimestamp)(),await (0,a.addDoc)((0,a.collection)(l.db,"sections"),e),alert("Section created successfully!");F(!1),$(null),eR()}catch(e){console.error("Error saving section:",e),alert("Failed to save section. Please check console for details.")}},eA=async e=>{if(confirm("Are you sure you want to delete this section? This will also delete all lessons in this section."))try{await (0,a.deleteDoc)((0,a.doc)(l.db,"sections",e)),alert("Section deleted successfully!"),eR()}catch(e){console.error("Error deleting section:",e),alert("Failed to delete section. Please check console for details.")}},eL=async(e,s)=>{let t=A.findIndex(s=>s.id===e);if(-1===t)return;let r="up"===s?t-1:t+1;if(r<0||r>=A.length)return;let i=A[t],n=A[r];try{await (0,a.updateDoc)((0,a.doc)(l.db,"sections",i.id),{orderIndex:n.orderIndex,updatedAt:(0,a.serverTimestamp)()}),await (0,a.updateDoc)((0,a.doc)(l.db,"sections",n.id),{orderIndex:i.orderIndex,updatedAt:(0,a.serverTimestamp)()}),eR()}catch(e){console.error("Error moving section:",e),alert("Failed to move section. Please check console for details.")}},eU=async e=>{try{try{let s=await (0,a.getDocs)((0,a.collection)(l.db,"lessons")),t=[];s.forEach(s=>{let r=s.data();String(r.sectionId)===String(e)&&t.push({id:s.id,...r})}),t.sort((e,s)=>(e.orderIndex||0)-(s.orderIndex||0)),B(s=>({...s,[e]:t}));return}catch(s){console.error("Error in fallback method:",s),B(s=>({...s,[e]:[]}))}}catch(s){console.error(`Error loading lessons for section ${e}:`,s),B(s=>({...s,[e]:[]}))}},eF=e=>{G(s=>{let t=new Set(s);return t.has(e)?t.delete(e):t.add(e),t})},ez=async()=>{if(!K.title?.trim())return void alert("Please enter a lesson title");if(!Q)return void alert("Section ID is missing");try{let e={courseId:x,sectionId:Q,title:K.title,lessonType:K.lessonType||"video",orderIndex:K.orderIndex||0,isFreePreview:K.isFreePreview||!1,completionRule:K.completionRule||"watch_percentage",updatedAt:(0,a.serverTimestamp)()};K.description&&(e.description=K.description),"video"===K.lessonType&&(K.videoSource&&(e.videoSource=K.videoSource),K.videoUrl&&(e.videoUrl=K.videoUrl),void 0!==K.videoDuration&&null!==K.videoDuration&&(e.videoDuration=K.videoDuration)),K.notesPdfUrl&&(e.notesPdfUrl=K.notesPdfUrl),K.transcriptText&&(e.transcriptText=K.transcriptText),"watch_percentage"===K.completionRule&&void 0!==K.watchPercentageRequired&&(e.watchPercentageRequired=K.watchPercentageRequired),void 0!==K.dripDelayDays&&null!==K.dripDelayDays&&(e.dripDelayDays=K.dripDelayDays);let s=(e=>{let s={};for(let t in e)void 0!==e[t]&&"id"!==t&&(s[t]=e[t]);return s})(e);if(Y?.id){let e=(0,a.doc)(l.db,"lessons",Y.id);await (0,a.updateDoc)(e,s),alert("Lesson updated successfully!")}else s.createdAt=(0,a.serverTimestamp)(),await (0,a.addDoc)((0,a.collection)(l.db,"lessons"),s),alert("Lesson created successfully!");await new Promise(e=>setTimeout(e,500)),await eU(Q),setTimeout(async()=>{await eU(Q)},1e3),V.has(Q)||G(e=>{let s=new Set(e);return s.add(Q),s}),W(null),J(null),et(null),B(e=>({...e}))}catch(e){console.error("Error saving lesson:",e),alert(`Failed to save lesson: ${e instanceof Error?e.message:"Unknown error"}. Please check console for details.`)}},e$=async(e,s)=>{if(confirm("Are you sure you want to delete this lesson?"))try{await (0,a.deleteDoc)((0,a.doc)(l.db,"lessons",e)),alert("Lesson deleted successfully!"),eU(s)}catch(e){console.error("Error deleting lesson:",e),alert("Failed to delete lesson. Please check console for details.")}},eO=async(e,s,t)=>{let r=M[s]||[],i=r.findIndex(s=>s.id===e);if(-1===i)return;let n="up"===t?i-1:i+1;if(n<0||n>=r.length)return;let d=r[i],c=r[n];try{await (0,a.updateDoc)((0,a.doc)(l.db,"lessons",d.id),{orderIndex:c.orderIndex,updatedAt:(0,a.serverTimestamp)()}),await (0,a.updateDoc)((0,a.doc)(l.db,"lessons",c.id),{orderIndex:d.orderIndex,updatedAt:(0,a.serverTimestamp)()}),eU(s)}catch(e){console.error("Error moving lesson:",e),alert("Failed to move lesson. Please check console for details.")}},eq=e=>{let s=Math.floor(e/3600),t=Math.floor(e%3600/60),r=e%60;return s>0?`${s}:${t.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`:`${t}:${r.toString().padStart(2,"0")}`},eM=async e=>{try{ee(!0),et(e);let s=await new Promise((s,t)=>{let r=document.createElement("video");r.preload="metadata",r.onloadedmetadata=()=>{window.URL.revokeObjectURL(r.src),s(Math.floor(r.duration))},r.onerror=()=>{t(Error("Failed to load video metadata"))},r.src=URL.createObjectURL(e)});X(e=>({...e,videoDuration:s}));let t=new FormData;t.append("file",e),t.append("folder",`courses/lessons/${x}`);let r=await fetch("/api/upload",{method:"POST",body:t}),a=await r.json();if(!r.ok)throw Error(a.error||"Video upload failed");X(e=>({...e,videoUrl:a.url,videoSource:"s3",videoDuration:s})),alert("Video uploaded successfully! Duration: "+eq(s))}catch(e){console.error("Video upload error:",e),alert("Failed to upload video: "+(e.message||"Unknown error"))}finally{ee(!1)}},eB=async()=>{try{ex(!0);let e=(0,a.query)((0,a.collection)(l.db,"progress"),(0,a.where)("courseId","==",x)),s=await (0,a.getDocs)(e),t=[];Object.values(M).forEach(e=>{t.push(...e)});let r=t.length,i={};s.forEach(e=>{let s={id:e.id,...e.data()};i[s.userId]||(i[s.userId]={userId:s.userId,progressData:[]}),i[s.userId].progressData.push(s)});let n=[];for(let[e,s]of Object.entries(i))try{let t=(await (0,a.getDoc)((0,a.doc)(l.db,"users",e))).data(),i=s.progressData.filter(e=>e.completed).length,d=r>0?Math.round(i/r*100):0;n.push({userId:e,userName:t?.name||"Unknown User",userEmail:t?.email||"No email",progressData:s.progressData,overallProgress:d,lessonsCompleted:i,totalLessons:r})}catch(s){console.error(`Error loading user ${e}:`,s)}n.sort((e,s)=>s.overallProgress-e.overallProgress),eo(n)}catch(e){console.error("Error loading student progress:",e),alert("Failed to load student progress. Please check console for details.")}finally{ex(!1)}};(0,t.useEffect)(()=>{"progress"===P&&Object.keys(M).length>0&&eB()},[P,x,M]),(0,t.useEffect)(()=>{"reviews"===P&&eV()},[P,x]),(0,t.useEffect)(()=>{"analytics"===P&&eY()},[P,x,M]);let eV=async()=>{try{let e;ep(!0);let s=(0,a.query)((0,a.collection)(l.db,"reviews"),(0,a.where)("courseId","==",x),(0,a.orderBy)("createdAt","desc"));try{e=await (0,a.getDocs)(s)}catch(t){let s=(0,a.query)((0,a.collection)(l.db,"reviews"),(0,a.where)("courseId","==",x));e=await (0,a.getDocs)(s)}let t=[];e.forEach(e=>{t.push({id:e.id,...e.data()})}),t.sort((e,s)=>{let t=e.createdAt?.seconds||0;return(s.createdAt?.seconds||0)-t}),eh(t);let r=t.filter(e=>e.approved);if(r.length>0){let e=r.reduce((e,s)=>e+(s.rating||0),0)/r.length,s=Math.round(10*e)/10;ey(s),eI(e=>({...e,averageRating:s}))}else ey(0),eI(e=>({...e,averageRating:0}))}catch(e){console.error("Error loading reviews:",e)}finally{ep(!1)}},eG=async e=>{try{let s=(0,a.doc)(l.db,"reviews",e);await (0,a.updateDoc)(s,{approved:!0,updatedAt:(0,a.serverTimestamp)()}),eV(),alert("Review approved successfully!")}catch(e){console.error("Error approving review:",e),alert("Failed to approve review. Please check console for details.")}},e_=async e=>{if(confirm("Are you sure you want to reject this review? It will no longer be visible to students."))try{let s=(0,a.doc)(l.db,"reviews",e);await (0,a.updateDoc)(s,{approved:!1,updatedAt:(0,a.serverTimestamp)()}),eV(),alert("Review rejected successfully!")}catch(e){console.error("Error rejecting review:",e),alert("Failed to reject review. Please check console for details.")}},eH=async e=>{if(confirm("Are you sure you want to delete this review? This action cannot be undone."))try{await (0,a.deleteDoc)((0,a.doc)(l.db,"reviews",e)),eV(),alert("Review deleted successfully!")}catch(e){console.error("Error deleting review:",e),alert("Failed to delete review. Please check console for details.")}},[eQ,eW]=(0,t.useState)([]),eY=async()=>{try{eN(!0);let e=(0,a.query)((0,a.collection)(l.db,"enrollments"),(0,a.where)("courseId","==",x)),s=await (0,a.getDocs)(e),t=[];s.forEach(e=>{let s=e.data();t.push({id:e.id,userId:s.userId||"",status:s.status||"active",enrolledAt:s.enrolledAt||s.enrolled_at})});let r=(0,a.query)((0,a.collection)(l.db,"progress"),(0,a.where)("courseId","==",x)),i=await (0,a.getDocs)(r),n=[];i.forEach(e=>{n.push({id:e.id,...e.data()})}),eW(n);let d=[];Object.values(M).forEach(e=>{d.push(...e)});let c=t.length,o=t.filter(e=>"active"===e.status).length,m=new Set(t.map(e=>e.userId)),u=new Set,h={};n.forEach(e=>{h[e.userId]||(h[e.userId]=[]),h[e.userId].push(e)}),m.forEach(e=>{(h[e]||[]).filter(e=>e.completed).length===d.length&&d.length>0&&u.add(e)});let g=c>0?Math.round(u.size/c*100):0,p=0;try{let e=(0,a.query)((0,a.collection)(l.db,"orders"),(0,a.where)("courseId","==",x)),s=await (0,a.getDocs)(e);s.size>0?s.forEach(e=>{let s=e.data(),t=s.amount||s.totalAmount||s.price||0;p+=t}):p=t.length*(eC.price||0)}catch(e){console.warn("Could not query orders collection, using enrollment-based estimate:",e),p=t.length*(eC.price||0)}let b=d.map(e=>{let s=n.filter(s=>s.lessonId===e.id),t=new Set(s.map(e=>e.userId)).size,r=s.filter(e=>e.completed).length,a=t>0?Math.round((t-r)/t*100):0;return{lessonId:e.id||"",lessonTitle:e.title,enrollments:c,completions:r,dropOffRate:a}}),y=[],j=new Date;for(let e=29;e>=0;e--){let s=new Date(j);s.setDate(s.getDate()-e);let r=s.toISOString().split("T")[0],a=t.filter(e=>!!e.enrolledAt&&(e.enrolledAt.seconds?new Date(1e3*e.enrolledAt.seconds).toISOString().split("T")[0]:null)===r).length,l=n.filter(e=>!!e.updatedAt&&!!e.completed&&(e.updatedAt.seconds?new Date(1e3*e.updatedAt.seconds).toISOString().split("T")[0]:null)===r).length;y.push({date:r,activeUsers:a,lessonsCompleted:l})}ev({totalEnrollments:c,activeStudents:o,completionRate:g,revenueGenerated:p,lessonDropOffData:b,engagementGraphData:y})}catch(e){console.error("Error loading analytics:",e),alert("Failed to load analytics. Please check console for details.")}finally{eN(!1)}},eJ=async e=>{try{let s=(0,a.query)((0,a.collection)(l.db,"quizzes"),(0,a.where)("lessonId","==",e)),t=await (0,a.getDocs)(s),r=[];t.forEach(e=>{r.push({id:e.id,...e.data()})}),ea(s=>({...s,[e]:r}))}catch(s){console.error(`Error loading quizzes for lesson ${e}:`,s)}},eK=async e=>{if(e.preventDefault(),!eC.title?.trim())return void alert("Please enter a course title");if(!eC.shortDescription?.trim())return void alert("Please enter a short description");if(eC.shortDescription.length>200)return void alert("Short description must be 200 characters or less");if(!eC.fullDescription?.trim())return void alert("Please enter a full description");if(!eC.category)return void alert("Please select a category");if(!eC.instructors||0===eC.instructors.length)return void alert("Please select at least one instructor");if(!eC.thumbnailImage)return void alert("Please upload a thumbnail image");if(!eC.price||eC.price<=0)return void alert("Please enter a valid price");if("limited"===eC.accessType&&!eC.accessDurationDays)return void alert("Please enter access duration in days for limited access");try{y(!0);let e={title:eC.title,slug:eC.slug,shortDescription:eC.shortDescription,fullDescription:eC.fullDescription,language:eC.language,category:eC.category,tags:eC.tags||[],level:eC.level,courseType:"video_course",instructors:eC.instructors,thumbnailImage:eC.thumbnailImage,status:eC.status,price:eC.price,currency:eC.currency||"INR",gstApplicable:eC.gstApplicable||!1,accessType:eC.accessType,installmentEnabled:eC.installmentEnabled||!1,allowBundle:eC.allowBundle||!1,couponAllowed:eC.couponAllowed||!1,enrollmentType:eC.enrollmentType,allowDownloads:eC.allowDownloads||!1,screenRecordingBlocked:eC.screenRecordingBlocked||!1,ipRestrictionEnabled:eC.ipRestrictionEnabled||!1,certificateEnabled:eC.certificateEnabled||!1,allowReviews:!1!==eC.allowReviews,autoApproveReviews:eC.autoApproveReviews||!1,averageRating:eb||0,updatedAt:(0,a.serverTimestamp)()};eC.subCategory&&(e.subCategory=eC.subCategory),eC.promoVideoUrl&&(e.promoVideoUrl=eC.promoVideoUrl),void 0!==eC.discountedPrice&&null!==eC.discountedPrice&&(e.discountedPrice=eC.discountedPrice),eC.discountStartDate&&(e.discountStartDate=eC.discountStartDate),eC.discountEndDate&&(e.discountEndDate=eC.discountEndDate),void 0!==eC.accessDurationDays&&null!==eC.accessDurationDays&&(e.accessDurationDays=eC.accessDurationDays),void 0!==eC.affiliateCommissionPercentage&&null!==eC.affiliateCommissionPercentage&&(e.affiliateCommissionPercentage=eC.affiliateCommissionPercentage),eC.bundleCourseIds&&eC.bundleCourseIds.length>0&&(e.bundleCourseIds=eC.bundleCourseIds),eC.bonusContentIds&&eC.bonusContentIds.length>0&&(e.bonusContentIds=eC.bonusContentIds),void 0!==eC.maxCouponDiscountPercentage&&null!==eC.maxCouponDiscountPercentage&&(e.maxCouponDiscountPercentage=eC.maxCouponDiscountPercentage),void 0!==eC.maxEnrollments&&null!==eC.maxEnrollments&&(e.maxEnrollments=eC.maxEnrollments),void 0!==eC.deviceLimit&&null!==eC.deviceLimit&&(e.deviceLimit=eC.deviceLimit),eC.certificateTemplateId&&(e.certificateTemplateId=eC.certificateTemplateId),eC.certificateIssueRule&&(e.certificateIssueRule=eC.certificateIssueRule),eC.seoTitle&&(e.seoTitle=eC.seoTitle),eC.metaDescription&&(e.metaDescription=eC.metaDescription),eC.ogImage&&(e.ogImage=eC.ogImage),eC.landingPageHeadline&&(e.landingPageHeadline=eC.landingPageHeadline),eC.ctaText&&(e.ctaText=eC.ctaText);let s=(e=>{let s={};for(let t in e)void 0!==e[t]&&"id"!==t&&(s[t]=e[t]);return s})(e),t=(0,a.doc)(l.db,"courses",x);await (0,a.updateDoc)(t,s),alert("Course updated successfully!"),T(!1),eE()}catch(e){console.error("Error updating course:",e),alert("Failed to update course. Please check console for details.")}finally{y(!1)}};return g?(0,s.jsx)(i.AdminLayout,{children:(0,s.jsx)("div",{className:"text-center py-12",children:"Loading course..."})}):(0,s.jsx)(i.AdminLayout,{children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"mb-8 flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:R?"Edit Course":"Course Details"}),(0,s.jsx)("p",{className:"text-gray-600 mt-2",children:eC.title})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("button",{onClick:()=>e.push("/admin/courses"),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300",children:"← Back to Courses"}),!R&&(0,s.jsx)("button",{onClick:()=>T(!0),className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Edit Course"})]})]}),R?(0,s.jsxs)("form",{onSubmit:eK,className:"bg-white rounded-lg shadow",children:[(0,s.jsx)("div",{className:"border-b border-gray-200",children:(0,s.jsx)("nav",{className:"flex space-x-8 px-6","aria-label":"Tabs",children:[{id:"basic",label:"Basic Info"},{id:"curriculum",label:"Curriculum"},{id:"pricing",label:"Pricing"},{id:"access",label:"Access Control"},{id:"bundles",label:"Bundles & Offers"},{id:"certificate",label:"Certificate"},{id:"reviews",label:"Reviews & Ratings"},{id:"seo",label:"SEO & Marketing"},{id:"analytics",label:"Analytics"},{id:"progress",label:"Student Progress"}].map(e=>(0,s.jsx)("button",{type:"button",onClick:()=>E(e.id),className:`py-4 px-1 border-b-2 font-medium text-sm ${P===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:e.label},e.id))})}),(0,s.jsxs)("div",{className:"p-6 max-w-5xl",children:["basic"===P&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Course Title *"}),(0,s.jsx)("input",{type:"text",required:!0,value:eC.title,onChange:e=>{let s=e.target.value,t=s.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)/g,"");eI(e=>({...e,title:s,slug:t}))},className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"Enter course title"}),eC.slug&&(0,s.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Slug: ",eC.slug]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Short Description * (Max 200 characters)"}),(0,s.jsx)("textarea",{required:!0,value:eC.shortDescription,onChange:e=>eI(s=>({...s,shortDescription:e.target.value})),maxLength:200,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"Brief description (max 200 characters)"}),(0,s.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[eC.shortDescription?.length||0,"/200 characters"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Description *"}),(0,s.jsx)("textarea",{required:!0,value:eC.fullDescription,onChange:e=>eI(s=>({...s,fullDescription:e.target.value})),rows:8,className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"Detailed course description"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Language *"}),(0,s.jsxs)("select",{value:eC.language,onChange:e=>eI(s=>({...s,language:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[(0,s.jsx)("option",{value:"english",children:"English"}),(0,s.jsx)("option",{value:"hindi",children:"Hindi"}),(0,s.jsx)("option",{value:"hinglish",children:"Hinglish"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Level *"}),(0,s.jsxs)("select",{value:eC.level,onChange:e=>eI(s=>({...s,level:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[(0,s.jsx)("option",{value:"beginner",children:"Beginner"}),(0,s.jsx)("option",{value:"intermediate",children:"Intermediate"}),(0,s.jsx)("option",{value:"advanced",children:"Advanced"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category *"}),(0,s.jsxs)("select",{value:eC.category,onChange:e=>eI(s=>({...s,category:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",required:!0,children:[(0,s.jsx)("option",{value:"",children:"Select a category"}),j.map(e=>(0,s.jsx)("option",{value:e.categoryId,children:e.name},e.categoryId))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tags (comma-separated)"}),(0,s.jsx)("input",{type:"text",value:S,onChange:e=>{var s;let t;return k(s=e.target.value),t=s.split(",").map(e=>e.trim()).filter(e=>e.length>0),void eI(e=>({...e,tags:t}))},className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"e.g., web development, javascript, react"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Instructors * (Select at least one)"}),(0,s.jsx)("div",{className:"space-y-2 max-h-40 overflow-y-auto border border-gray-300 rounded-lg p-2",children:f.map(e=>(0,s.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer hover:bg-gray-50 p-2 rounded",children:[(0,s.jsx)("input",{type:"checkbox",checked:eC.instructors?.includes(e.id)||!1,onChange:s=>{let t=eC.instructors||[];s.target.checked?eI(s=>({...s,instructors:[...t,e.id]})):eI(s=>({...s,instructors:t.filter(s=>s!==e.id)}))},className:"rounded"}),(0,s.jsxs)("span",{className:"text-sm",children:[e.name," (",e.email,")"]})]},e.id))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Thumbnail Image *"}),eC.thumbnailImage&&(0,s.jsx)("div",{className:"mb-2 w-32 h-32 rounded-lg overflow-hidden border border-gray-200",children:(0,s.jsx)(d.S3Image,{src:eC.thumbnailImage,alt:"Thumbnail preview",className:"w-full h-full object-cover"})}),(0,s.jsx)(n.FileUpload,{folder:"courses/thumbnails",onUploadComplete:e=>eI(s=>({...s,thumbnailImage:e})),accept:"image/*"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Promo Video URL (optional)"}),(0,s.jsx)("input",{type:"url",value:eC.promoVideoUrl||"",onChange:e=>eI(s=>({...s,promoVideoUrl:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"https://www.youtube.com/watch?v=..."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status *"}),(0,s.jsxs)("select",{value:eC.status,onChange:e=>eI(s=>({...s,status:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[(0,s.jsx)("option",{value:"draft",children:"Draft"}),(0,s.jsx)("option",{value:"published",children:"Published"}),(0,s.jsx)("option",{value:"archived",children:"Archived"})]})]})]}),"curriculum"===P&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold",children:"Course Sections"}),(0,s.jsxs)("button",{type:"button",onClick:()=>{$(null),q({title:"",description:"",orderIndex:A.length,unlockRule:"paid"}),F(!0)},className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[(0,s.jsx)(c.Plus,{size:18}),"Add Section"]})]}),U&&(0,s.jsxs)("div",{className:"border border-gray-300 rounded-lg p-4 bg-gray-50",children:[(0,s.jsx)("h4",{className:"font-semibold mb-4",children:z?"Edit Section":"Add New Section"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Section Title *"}),(0,s.jsx)("input",{type:"text",value:O.title,onChange:e=>q(s=>({...s,title:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"e.g., Introduction to Web Development"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description (optional)"}),(0,s.jsx)("textarea",{value:O.description||"",onChange:e=>q(s=>({...s,description:e.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"Brief description of what this section covers"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Order Index"}),(0,s.jsx)("input",{type:"number",min:"0",value:O.orderIndex||0,onChange:e=>q(s=>({...s,orderIndex:parseInt(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unlock Rule *"}),(0,s.jsxs)("select",{value:O.unlockRule,onChange:e=>q(s=>({...s,unlockRule:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[(0,s.jsx)("option",{value:"free",children:"Free"}),(0,s.jsx)("option",{value:"paid",children:"Paid"}),(0,s.jsx)("option",{value:"drip",children:"Drip (Time-based)"})]})]})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("button",{type:"button",onClick:eT,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:z?"Update Section":"Create Section"}),(0,s.jsx)("button",{type:"button",onClick:()=>{F(!1),$(null)},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300",children:"Cancel"})]})]})]}),(0,s.jsx)("div",{className:"space-y-3",children:0===A.length?(0,s.jsx)("div",{className:"text-center py-8 text-gray-500 border border-dashed border-gray-300 rounded-lg",children:'No sections yet. Click "Add Section" to create your first section.'}):A.map((e,t)=>{let r=M[e.id||""]||[],a=V.has(e.id||""),l=Q===e.id;return(0,s.jsxs)("div",{className:"border border-gray-300 rounded-lg overflow-hidden",children:[(0,s.jsx)("div",{className:"p-4 hover:bg-gray-50",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("button",{type:"button",onClick:()=>eF(e.id),className:"text-gray-400 hover:text-gray-600",children:a?"▼":"▶"}),(0,s.jsxs)("span",{className:"text-sm font-medium text-gray-500",children:["#",e.orderIndex+1]}),(0,s.jsx)("h4",{className:"font-semibold text-lg",children:e.title}),(0,s.jsx)("span",{className:`px-2 py-1 text-xs rounded ${"free"===e.unlockRule?"bg-green-100 text-green-800":"paid"===e.unlockRule?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"}`,children:e.unlockRule}),(0,s.jsxs)("span",{className:"text-xs text-gray-500",children:["(",r.length," lesson",1!==r.length?"s":"",")"]})]}),e.description&&(0,s.jsx)("p",{className:"text-sm text-gray-600 mt-2 ml-8",children:e.description})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("button",{type:"button",onClick:()=>{var s;let t;return t=M[s=e.id]||[],void(J(null),et(null),X({title:"",lessonType:"video",videoSource:"s3",videoUrl:"",videoDuration:0,description:"",orderIndex:t.length,isFreePreview:!1,notesPdfUrl:"",transcriptText:"",completionRule:"watch_percentage",watchPercentageRequired:100,dripDelayDays:void 0}),W(s),!V.has(s)&&eF(s))},className:"flex items-center gap-1 px-3 py-1 text-sm bg-green-600 text-white rounded hover:bg-green-700",title:"Add lesson",children:[(0,s.jsx)(c.Plus,{size:16}),"Add Lesson"]}),(0,s.jsx)("button",{type:"button",onClick:()=>eL(e.id,"up"),disabled:0===t,className:"p-2 text-gray-600 hover:bg-gray-200 rounded disabled:opacity-50 disabled:cursor-not-allowed",title:"Move up",children:(0,s.jsx)(u,{size:18})}),(0,s.jsx)("button",{type:"button",onClick:()=>eL(e.id,"down"),disabled:t===A.length-1,className:"p-2 text-gray-600 hover:bg-gray-200 rounded disabled:opacity-50 disabled:cursor-not-allowed",title:"Move down",children:(0,s.jsx)(h,{size:18})}),(0,s.jsx)("button",{type:"button",onClick:()=>{$(e),q({title:e.title,description:e.description||"",orderIndex:e.orderIndex,unlockRule:e.unlockRule}),F(!0)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded",title:"Edit section",children:(0,s.jsx)(o.Edit2,{size:18})}),(0,s.jsx)("button",{type:"button",onClick:()=>eA(e.id),className:"p-2 text-red-600 hover:bg-red-50 rounded",title:"Delete section",children:(0,s.jsx)(m.Trash2,{size:18})})]})]})}),a&&(0,s.jsxs)("div",{className:"border-t border-gray-200 bg-gray-50",children:[l&&(0,s.jsxs)("div",{className:"p-4 border-b border-gray-300 bg-white",children:[(0,s.jsx)("h5",{className:"font-semibold mb-4",children:Y?"Edit Lesson":"Add New Lesson"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Lesson Title *"}),(0,s.jsx)("input",{type:"text",value:K.title,onChange:e=>X(s=>({...s,title:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"e.g., Introduction to React"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Lesson Type *"}),(0,s.jsxs)("select",{value:K.lessonType,onChange:e=>X(s=>({...s,lessonType:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[(0,s.jsx)("option",{value:"video",children:"Video"}),(0,s.jsx)("option",{value:"pdf",children:"PDF"}),(0,s.jsx)("option",{value:"quiz",children:"Quiz"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Order Index"}),(0,s.jsx)("input",{type:"number",min:"0",value:K.orderIndex||0,onChange:e=>X(s=>({...s,orderIndex:parseInt(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]}),"video"===K.lessonType&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Video Source *"}),(0,s.jsxs)("select",{value:K.videoSource,onChange:e=>X(s=>({...s,videoSource:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[(0,s.jsx)("option",{value:"s3",children:"S3"}),(0,s.jsx)("option",{value:"vimeo",children:"Vimeo"}),(0,s.jsx)("option",{value:"youtube_private",children:"YouTube Private"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Video Duration"}),K.videoDuration&&K.videoDuration>0?(0,s.jsxs)("div",{className:"px-3 py-2 border border-gray-300 rounded-lg bg-gray-50",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("span",{className:"text-sm text-gray-700",children:eq(K.videoDuration)}),(0,s.jsx)("span",{className:"text-xs text-green-600 font-medium",children:"✓ Auto-calculated"})]}),(0,s.jsx)("input",{type:"hidden",value:K.videoDuration})]}):(0,s.jsx)("div",{className:"px-3 py-2 border border-gray-300 rounded-lg bg-gray-50 text-sm text-gray-500",children:"Duration will be calculated automatically after video upload"}),K.videoDuration&&K.videoDuration>0&&(0,s.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["(",K.videoDuration," seconds) - Auto-calculated from uploaded video"]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Video Upload *"}),K.videoUrl&&(0,s.jsxs)("div",{className:"mb-3 p-3 bg-green-50 border border-green-200 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-green-800",children:[(0,s.jsx)("span",{className:"text-green-600",children:"✓"}),(0,s.jsxs)("span",{children:["Video uploaded: ",K.videoUrl.split("/").pop()]}),K.videoDuration&&K.videoDuration>0&&(0,s.jsxs)("span",{className:"ml-2 text-xs",children:["(Duration: ",eq(K.videoDuration),")"]})]}),(0,s.jsx)("button",{type:"button",onClick:()=>{X(e=>({...e,videoUrl:"",videoDuration:0})),et(null)},className:"mt-2 text-xs text-red-600 hover:text-red-800",children:"Remove video"})]}),!K.videoUrl&&(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("label",{className:"cursor-pointer",children:[(0,s.jsx)("input",{type:"file",accept:"video/*",onChange:e=>{let s=e.target.files?.[0];s&&eM(s)},disabled:Z,className:"hidden"}),(0,s.jsx)("div",{className:"px-4 py-3 border-2 border-dashed border-gray-300 rounded-lg hover:border-blue-500 transition text-center bg-gray-50",children:Z?(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"Uploading video and calculating duration..."})]}):(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:"Click to upload video or drag and drop"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Supported: MP4, MOV, AVI, WebM (Duration will be auto-calculated)"})]})})]})}),(0,s.jsxs)("details",{className:"mt-3",children:[(0,s.jsx)("summary",{className:"text-xs text-gray-500 cursor-pointer hover:text-gray-700",children:"Or enter video URL manually (for external videos)"}),(0,s.jsx)("input",{type:"url",value:K.videoUrl||"",onChange:e=>X(s=>({...s,videoUrl:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg mt-2",placeholder:"https://... (for YouTube, Vimeo, etc.)",disabled:Z})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description (optional)"}),(0,s.jsx)("textarea",{value:K.description||"",onChange:e=>X(s=>({...s,description:e.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"Lesson description"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Completion Rule *"}),(0,s.jsxs)("select",{value:K.completionRule,onChange:e=>X(s=>({...s,completionRule:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[(0,s.jsx)("option",{value:"watch_percentage",children:"Watch Percentage"}),(0,s.jsx)("option",{value:"manual",children:"Manual"})]})]}),"watch_percentage"===K.completionRule&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Watch Percentage Required (%)"}),(0,s.jsx)("input",{type:"number",min:"0",max:"100",value:K.watchPercentageRequired||100,onChange:e=>X(s=>({...s,watchPercentageRequired:parseInt(e.target.value)||100})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes PDF URL (optional)"}),(0,s.jsx)("input",{type:"url",value:K.notesPdfUrl||"",onChange:e=>X(s=>({...s,notesPdfUrl:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"https://..."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Drip Delay Days (optional)"}),(0,s.jsx)("input",{type:"number",min:"0",value:K.dripDelayDays||"",onChange:e=>X(s=>({...s,dripDelayDays:e.target.value?parseInt(e.target.value):void 0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"Days to wait before unlocking"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Transcript Text (optional)"}),(0,s.jsx)("textarea",{value:K.transcriptText||"",onChange:e=>X(s=>({...s,transcriptText:e.target.value})),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"Video transcript text"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:K.isFreePreview||!1,onChange:e=>X(s=>({...s,isFreePreview:e.target.checked})),className:"rounded"}),(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Free Preview (available without purchase)"})]}),(0,s.jsxs)("div",{className:"flex gap-3",children:[(0,s.jsx)("button",{type:"button",onClick:ez,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:Y?"Update Lesson":"Create Lesson"}),(0,s.jsx)("button",{type:"button",onClick:()=>{W(null),J(null)},className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300",children:"Cancel"})]})]})]}),(0,s.jsx)("div",{className:"p-4 space-y-2",children:0===r.length?(0,s.jsx)("div",{className:"text-center py-4 text-gray-500 text-sm",children:'No lessons yet. Click "Add Lesson" to create one.'}):r.map((t,a)=>(0,s.jsx)("div",{className:"bg-white border border-gray-300 rounded-lg p-3 hover:bg-gray-50",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("span",{className:"text-xs font-medium text-gray-500",children:["#",t.orderIndex+1]}),(0,s.jsx)("h5",{className:"font-medium",children:t.title}),(0,s.jsx)("span",{className:`px-2 py-1 text-xs rounded ${"video"===t.lessonType?"bg-blue-100 text-blue-800":"pdf"===t.lessonType?"bg-purple-100 text-purple-800":"bg-orange-100 text-orange-800"}`,children:t.lessonType}),t.isFreePreview&&(0,s.jsx)("span",{className:"px-2 py-1 text-xs rounded bg-green-100 text-green-800",children:"Free Preview"}),"video"===t.lessonType&&t.videoDuration&&(0,s.jsx)("span",{className:"text-xs text-gray-500",children:eq(t.videoDuration)})]}),t.description&&(0,s.jsx)("p",{className:"text-xs text-gray-600 mt-1 ml-8",children:t.description})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)("button",{type:"button",onClick:()=>eO(t.id,e.id,"up"),disabled:0===a,className:"p-1 text-gray-600 hover:bg-gray-200 rounded disabled:opacity-50 disabled:cursor-not-allowed",title:"Move up",children:(0,s.jsx)(u,{size:16})}),(0,s.jsx)("button",{type:"button",onClick:()=>eO(t.id,e.id,"down"),disabled:a===r.length-1,className:"p-1 text-gray-600 hover:bg-gray-200 rounded disabled:opacity-50 disabled:cursor-not-allowed",title:"Move down",children:(0,s.jsx)(h,{size:16})}),(0,s.jsx)("button",{type:"button",onClick:()=>{J(t),et(null),X({title:t.title,lessonType:t.lessonType,videoSource:t.videoSource,videoUrl:t.videoUrl||"",videoDuration:t.videoDuration||0,description:t.description||"",orderIndex:t.orderIndex,isFreePreview:t.isFreePreview||!1,notesPdfUrl:t.notesPdfUrl||"",transcriptText:t.transcriptText||"",completionRule:t.completionRule,watchPercentageRequired:t.watchPercentageRequired||100,dripDelayDays:t.dripDelayDays}),W(t.sectionId),V.has(t.sectionId)||eF(t.sectionId)},className:"p-1 text-blue-600 hover:bg-blue-50 rounded",title:"Edit lesson",children:(0,s.jsx)(o.Edit2,{size:16})}),(0,s.jsx)("button",{type:"button",onClick:()=>e$(t.id,e.id),className:"p-1 text-red-600 hover:bg-red-50 rounded",title:"Delete lesson",children:(0,s.jsx)(m.Trash2,{size:16})})]})]})},t.id))})]})]},e.id)})})]}),"pricing"===P&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"border-b border-gray-200 pb-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Base Pricing"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price *"}),(0,s.jsx)("input",{type:"number",required:!0,min:"0",step:"0.01",value:eC.price||0,onChange:e=>eI(s=>({...s,price:parseFloat(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"0.00"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Currency *"}),(0,s.jsxs)("select",{value:eC.currency||"INR",onChange:e=>eI(s=>({...s,currency:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[(0,s.jsx)("option",{value:"INR",children:"INR (₹)"}),(0,s.jsx)("option",{value:"USD",children:"USD ($)"}),(0,s.jsx)("option",{value:"EUR",children:"EUR (€)"}),(0,s.jsx)("option",{value:"GBP",children:"GBP (£)"})]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Discounted Price (optional)"}),(0,s.jsx)("input",{type:"number",min:"0",step:"0.01",value:eC.discountedPrice||"",onChange:e=>eI(s=>({...s,discountedPrice:e.target.value?parseFloat(e.target.value):void 0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"Enter discounted price"}),eC.discountedPrice&&eC.price&&(0,s.jsxs)("p",{className:"text-xs text-green-600 mt-1",children:["Discount: ",((1-eC.discountedPrice/eC.price)*100).toFixed(1),"% off"]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Discount Start Date (optional)"}),(0,s.jsx)("input",{type:"datetime-local",value:eC.discountStartDate?eC.discountStartDate.seconds?new Date(1e3*eC.discountStartDate.seconds).toISOString().slice(0,16):eC.discountStartDate instanceof Date?eC.discountStartDate.toISOString().slice(0,16):"":"",onChange:e=>{let s=e.target.value?new Date(e.target.value):void 0;eI(e=>({...e,discountStartDate:s?{seconds:Math.floor(s.getTime()/1e3)}:void 0}))},className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Discount End Date (optional)"}),(0,s.jsx)("input",{type:"datetime-local",value:eC.discountEndDate?eC.discountEndDate.seconds?new Date(1e3*eC.discountEndDate.seconds).toISOString().slice(0,16):eC.discountEndDate instanceof Date?eC.discountEndDate.toISOString().slice(0,16):"":"",onChange:e=>{let s=e.target.value?new Date(e.target.value):void 0;eI(e=>({...e,discountEndDate:s?{seconds:Math.floor(s.getTime()/1e3)}:void 0}))},className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]})]}),(0,s.jsxs)("div",{className:"border-b border-gray-200 pb-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Access Control"}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Access Type *"}),(0,s.jsxs)("select",{value:eC.accessType||"lifetime",onChange:e=>eI(s=>({...s,accessType:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[(0,s.jsx)("option",{value:"lifetime",children:"Lifetime Access"}),(0,s.jsx)("option",{value:"limited",children:"Limited Duration"}),(0,s.jsx)("option",{value:"subscription",children:"Subscription Based"})]}),(0,s.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["lifetime"===eC.accessType&&"Students get access forever","limited"===eC.accessType&&"Access expires after specified duration","subscription"===eC.accessType&&"Access requires active subscription"]})]}),"limited"===eC.accessType&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Access Duration (Days) *"}),(0,s.jsx)("input",{type:"number",required:!0,min:"1",value:eC.accessDurationDays||"",onChange:e=>eI(s=>({...s,accessDurationDays:e.target.value?parseInt(e.target.value):void 0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"e.g., 365 for 1 year"})]})]}),(0,s.jsxs)("div",{className:"border-b border-gray-200 pb-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Tax & Payment Options"}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,s.jsx)("input",{type:"checkbox",checked:eC.gstApplicable||!1,onChange:e=>eI(s=>({...s,gstApplicable:e.target.checked})),className:"rounded"}),(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"GST Applicable"}),(0,s.jsx)("span",{className:"text-xs text-gray-500",children:"(Goods and Services Tax will be added to the price)"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:eC.installmentEnabled||!1,onChange:e=>eI(s=>({...s,installmentEnabled:e.target.checked})),className:"rounded"}),(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Enable Installments"}),(0,s.jsx)("span",{className:"text-xs text-gray-500",children:"(Allow students to pay in multiple installments)"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Affiliate & Commission"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Affiliate Commission Percentage (optional)"}),(0,s.jsx)("input",{type:"number",min:"0",max:"100",step:"0.01",value:eC.affiliateCommissionPercentage||"",onChange:e=>eI(s=>({...s,affiliateCommissionPercentage:e.target.value?parseFloat(e.target.value):void 0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"e.g., 15 for 15%"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Percentage of course price that will be paid to affiliates who refer students"})]})]}),(0,s.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Pricing Summary"}),(0,s.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Base Price:"}),(0,s.jsxs)("span",{className:"font-medium",children:["INR"===eC.currency?"₹":"USD"===eC.currency?"$":"EUR"===eC.currency?"€":"£",eC.price?.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})||"0.00"]})]}),eC.discountedPrice&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex justify-between text-red-600",children:[(0,s.jsx)("span",{children:"Discount:"}),(0,s.jsxs)("span",{children:["-","INR"===eC.currency?"₹":"USD"===eC.currency?"$":"EUR"===eC.currency?"€":"£",(eC.price-eC.discountedPrice).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),(0,s.jsxs)("div",{className:"flex justify-between font-semibold text-lg pt-2 border-t border-gray-300",children:[(0,s.jsx)("span",{children:"Final Price:"}),(0,s.jsxs)("span",{className:"text-green-600",children:["INR"===eC.currency?"₹":"USD"===eC.currency?"$":"EUR"===eC.currency?"€":"£",eC.discountedPrice.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]}),eC.gstApplicable&&(0,s.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 pt-2 border-t border-gray-200",children:[(0,s.jsx)("span",{children:"+ GST (18%):"}),(0,s.jsxs)("span",{children:["INR"===eC.currency?"₹":"USD"===eC.currency?"$":"EUR"===eC.currency?"€":"£",(.18*(eC.discountedPrice||eC.price||0)).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]})]})]})]}),"access"===P&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"border-b border-gray-200 pb-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Enrollment Settings"}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Enrollment Type *"}),(0,s.jsxs)("select",{value:eC.enrollmentType||"auto",onChange:e=>eI(s=>({...s,enrollmentType:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[(0,s.jsx)("option",{value:"auto",children:"Auto Enrollment"}),(0,s.jsx)("option",{value:"manual",children:"Manual Approval"})]}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"auto"===eC.enrollmentType?"Students are automatically enrolled after payment/registration":"Enrollment requires admin approval before access is granted"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Maximum Enrollments (optional)"}),(0,s.jsx)("input",{type:"number",min:"1",value:eC.maxEnrollments||"",onChange:e=>eI(s=>({...s,maxEnrollments:e.target.value?parseInt(e.target.value):void 0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"e.g., 100 for maximum 100 students"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Maximum number of students that can enroll in this course. Leave empty for unlimited enrollments."})]})]}),(0,s.jsxs)("div",{className:"border-b border-gray-200 pb-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Device & Access Limits"}),(0,s.jsxs)("div",{className:"mb-4",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Device Limit"}),(0,s.jsx)("input",{type:"number",min:"1",value:eC.deviceLimit||"",onChange:e=>eI(s=>({...s,deviceLimit:e.target.value?parseInt(e.target.value):void 0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"e.g., 3 for maximum 3 devices per student"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Maximum number of devices a student can use to access this course simultaneously. Leave empty for no limit."})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:eC.allowDownloads||!1,onChange:e=>eI(s=>({...s,allowDownloads:e.target.checked})),className:"rounded"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Allow Downloads"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Students can download course materials (videos, PDFs, etc.)"})]})]})]}),(0,s.jsxs)("div",{className:"border-b border-gray-200 pb-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Security & Protection"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:eC.screenRecordingBlocked||!1,onChange:e=>eI(s=>({...s,screenRecordingBlocked:e.target.checked})),className:"rounded mt-1"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Block Screen Recording"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Prevents students from recording course videos using screen capture tools"})]})]}),(0,s.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:eC.ipRestrictionEnabled||!1,onChange:e=>eI(s=>({...s,ipRestrictionEnabled:e.target.checked})),className:"rounded mt-1"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Enable IP Restriction"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Restrict access to specific IP addresses or IP ranges (requires additional IP whitelist configuration)"})]})]})]})]}),(0,s.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Access Control Summary"}),(0,s.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Enrollment Type:"}),(0,s.jsx)("span",{className:"font-medium capitalize",children:eC.enrollmentType||"auto"})]}),eC.maxEnrollments&&(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Max Enrollments:"}),(0,s.jsx)("span",{className:"font-medium",children:eC.maxEnrollments.toLocaleString()})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Device Limit:"}),(0,s.jsx)("span",{className:"font-medium",children:eC.deviceLimit?`${eC.deviceLimit} device${1!==eC.deviceLimit?"s":""}`:"Unlimited"})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Downloads:"}),(0,s.jsx)("span",{className:`font-medium ${eC.allowDownloads?"text-green-600":"text-red-600"}`,children:eC.allowDownloads?"Allowed":"Blocked"})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Screen Recording:"}),(0,s.jsx)("span",{className:`font-medium ${eC.screenRecordingBlocked?"text-green-600":"text-gray-400"}`,children:eC.screenRecordingBlocked?"Blocked":"Allowed"})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"IP Restriction:"}),(0,s.jsx)("span",{className:`font-medium ${eC.ipRestrictionEnabled?"text-yellow-600":"text-gray-400"}`,children:eC.ipRestrictionEnabled?"Enabled":"Disabled"})]})]})]})]}),"bundles"===P&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"border-b border-gray-200 pb-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Bundle Settings"}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,s.jsx)("input",{type:"checkbox",checked:eC.allowBundle||!1,onChange:e=>eI(s=>({...s,allowBundle:e.target.checked})),className:"rounded"}),(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Allow this course to be included in bundles"}),(0,s.jsx)("span",{className:"text-xs text-gray-500",children:"(This course can be packaged with other courses)"})]}),eC.allowBundle&&(0,s.jsxs)("div",{className:"ml-6 space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bundle Courses (Select courses to bundle with this one)"}),(0,s.jsx)("div",{className:"border border-gray-300 rounded-lg p-3 max-h-60 overflow-y-auto bg-gray-50",children:0===w.length?(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"No other courses available for bundling"}):(0,s.jsx)("div",{className:"space-y-2",children:w.map(e=>(0,s.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer hover:bg-white p-2 rounded",children:[(0,s.jsx)("input",{type:"checkbox",checked:eC.bundleCourseIds?.includes(e.id)||!1,onChange:s=>{let t=eC.bundleCourseIds||[];s.target.checked?eI(s=>({...s,bundleCourseIds:[...t,e.id]})):eI(s=>({...s,bundleCourseIds:t.filter(s=>s!==e.id)}))},className:"rounded"}),(0,s.jsx)("span",{className:"text-sm",children:e.title})]},e.id))})}),eC.bundleCourseIds&&eC.bundleCourseIds.length>0&&(0,s.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[eC.bundleCourseIds.length," course",1!==eC.bundleCourseIds.length?"s":""," selected"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bonus Content (Select lessons or courses as bonus content)"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs font-medium text-gray-600 mb-2",children:"Bonus Courses:"}),(0,s.jsx)("div",{className:"border border-gray-300 rounded-lg p-3 max-h-40 overflow-y-auto bg-gray-50",children:0===w.length?(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"No courses available"}):(0,s.jsx)("div",{className:"space-y-2",children:w.map(e=>(0,s.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer hover:bg-white p-2 rounded",children:[(0,s.jsx)("input",{type:"checkbox",checked:eC.bonusContentIds?.includes(`course:${e.id}`)||!1,onChange:s=>{let t=eC.bonusContentIds||[],r=`course:${e.id}`;s.target.checked?eI(e=>({...e,bonusContentIds:[...t,r]})):eI(e=>({...e,bonusContentIds:t.filter(e=>e!==r)}))},className:"rounded"}),(0,s.jsx)("span",{className:"text-sm",children:e.title})]},e.id))})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs font-medium text-gray-600 mb-2",children:"Bonus Lessons:"}),(0,s.jsx)("div",{className:"border border-gray-300 rounded-lg p-3 max-h-40 overflow-y-auto bg-gray-50",children:0===C.length?(0,s.jsx)("p",{className:"text-sm text-gray-500",children:0===Object.keys(M).length?"Load course sections first to select bonus lessons":"No lessons available from other courses"}):(0,s.jsx)("div",{className:"space-y-2",children:C.filter(e=>e.courseId!==x).map(e=>(0,s.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer hover:bg-white p-2 rounded",children:[(0,s.jsx)("input",{type:"checkbox",checked:eC.bonusContentIds?.includes(`lesson:${e.id}`)||!1,onChange:s=>{let t=eC.bonusContentIds||[],r=`lesson:${e.id}`;s.target.checked?eI(e=>({...e,bonusContentIds:[...t,r]})):eI(e=>({...e,bonusContentIds:t.filter(e=>e!==r)}))},className:"rounded"}),(0,s.jsx)("span",{className:"text-sm",children:e.title}),(0,s.jsx)("span",{className:"text-xs text-gray-500",children:"(from another course)"})]},e.id))})})]})]}),eC.bonusContentIds&&eC.bonusContentIds.length>0&&(0,s.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[eC.bonusContentIds.length," bonus item",1!==eC.bonusContentIds.length?"s":""," selected"]})]})]})]}),(0,s.jsxs)("div",{className:"border-b border-gray-200 pb-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Coupon Settings"}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,s.jsx)("input",{type:"checkbox",checked:eC.couponAllowed||!1,onChange:e=>eI(s=>({...s,couponAllowed:e.target.checked})),className:"rounded"}),(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Allow Coupons"}),(0,s.jsx)("span",{className:"text-xs text-gray-500",children:"(Students can apply coupon codes for discounts)"})]}),eC.couponAllowed&&(0,s.jsx)("div",{className:"ml-6",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Maximum Coupon Discount Percentage"}),(0,s.jsx)("input",{type:"number",min:"0",max:"100",step:"0.01",value:eC.maxCouponDiscountPercentage||"",onChange:e=>eI(s=>({...s,maxCouponDiscountPercentage:e.target.value?parseFloat(e.target.value):void 0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"e.g., 30 for 30% maximum discount"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Maximum discount percentage that can be applied via coupons (0-100%)"})]})})]}),eC.allowBundle&&(0,s.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Bundle Summary"}),(0,s.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Main Course:"}),(0,s.jsx)("span",{className:"font-medium",children:eC.title||"Untitled"})]}),eC.bundleCourseIds&&eC.bundleCourseIds.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Bundled Courses:"}),(0,s.jsx)("ul",{className:"list-disc list-inside ml-2 mt-1",children:eC.bundleCourseIds.map(e=>{let t=w.find(s=>s.id===e);return(0,s.jsx)("li",{className:"text-gray-700",children:t?.title||`Course ID: ${e}`},e)})})]}),eC.bonusContentIds&&eC.bonusContentIds.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Bonus Content:"}),(0,s.jsx)("ul",{className:"list-disc list-inside ml-2 mt-1",children:eC.bonusContentIds.map(e=>{if(e.startsWith("course:")){let t=e.replace("course:",""),r=w.find(e=>e.id===t);return(0,s.jsxs)("li",{className:"text-gray-700",children:["📚 ",r?.title||`Course ID: ${t}`]},e)}if(e.startsWith("lesson:")){let t=e.replace("lesson:",""),r=C.find(e=>e.id===t);return(0,s.jsxs)("li",{className:"text-gray-700",children:["📹 ",r?.title||`Lesson ID: ${t}`]},e)}return null})})]})]})]})]}),"certificate"===P&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"border-b border-gray-200 pb-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Certificate Configuration"}),(0,s.jsxs)("div",{className:"flex items-start space-x-2 mb-6",children:[(0,s.jsx)("input",{type:"checkbox",checked:eC.certificateEnabled||!1,onChange:e=>eI(s=>({...s,certificateEnabled:e.target.checked})),className:"rounded mt-1"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Enable Certificate Generation"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Students will receive a certificate upon meeting the completion criteria"})]})]}),eC.certificateEnabled&&(0,s.jsxs)("div",{className:"ml-6 space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Certificate Template ID (optional)"}),(0,s.jsx)("input",{type:"text",value:eC.certificateTemplateId||"",onChange:e=>eI(s=>({...s,certificateTemplateId:e.target.value||void 0})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"e.g., template_001"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Reference ID for the certificate design template (if using custom templates)"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Certificate Issue Rule *"}),(0,s.jsxs)("select",{value:eC.certificateIssueRule||"course_complete",onChange:e=>eI(s=>({...s,certificateIssueRule:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[(0,s.jsx)("option",{value:"course_complete",children:"Course Complete"}),(0,s.jsx)("option",{value:"quiz_pass",children:"Quiz Pass"})]}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"course_complete"===eC.certificateIssueRule?"Certificate will be issued when student completes all lessons in the course":"Certificate will be issued when student passes the required quiz with passing marks"})]}),"quiz_pass"===eC.certificateIssueRule&&(0,s.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,s.jsxs)("p",{className:"text-sm text-yellow-800",children:[(0,s.jsx)("strong",{children:"Note:"}),' When using "Quiz Pass" rule, make sure you have quizzes configured in the curriculum with passing marks set. The certificate will be issued when a student passes the quiz(es) as defined in the lesson settings.']})}),(0,s.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,s.jsx)("h4",{className:"text-sm font-semibold text-blue-900 mb-2",children:"Auto-Generated Fields"}),(0,s.jsxs)("div",{className:"space-y-2 text-sm text-blue-800",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Certificate Serial Number:"})," Automatically generated when certificate is issued",(0,s.jsxs)("p",{className:"text-xs text-blue-600 mt-1",children:["Format: CERT-",x?.substring(0,6).toUpperCase(),"-","{TIMESTAMP}"]})]}),(0,s.jsxs)("div",{className:"mt-3",children:[(0,s.jsx)("strong",{children:"Verification URL/QR Code:"})," Automatically generated for each certificate",(0,s.jsx)("p",{className:"text-xs text-blue-600 mt-1",children:"Unique verification link will be created for certificate verification on your website"})]})]})]}),(0,s.jsxs)("div",{className:"border border-gray-300 rounded-lg p-4 bg-gray-50",children:[(0,s.jsx)("h4",{className:"text-sm font-semibold mb-3",children:"Certificate Information"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-600",children:"Status:"}),(0,s.jsx)("p",{className:"font-medium text-green-600",children:"Enabled"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-600",children:"Issue Rule:"}),(0,s.jsx)("p",{className:"font-medium capitalize",children:"course_complete"===eC.certificateIssueRule?"Course Complete":"Quiz Pass"})]}),eC.certificateTemplateId&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-600",children:"Template ID:"}),(0,s.jsx)("p",{className:"font-medium",children:eC.certificateTemplateId})]})]})]})]}),!eC.certificateEnabled&&(0,s.jsx)("div",{className:"ml-6 bg-gray-50 border border-gray-200 rounded-lg p-4",children:(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Enable certificate generation to allow students to receive certificates upon course completion or quiz pass."})})]}),eC.certificateEnabled&&(0,s.jsxs)("div",{className:"border-t border-gray-200 pt-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Certificate Issuance Details"}),(0,s.jsxs)("div",{className:"bg-white border border-gray-300 rounded-lg p-4",children:[(0,s.jsx)("h4",{className:"font-medium mb-3",children:"How Certificates Work:"}),(0,s.jsxs)("ul",{className:"space-y-2 text-sm text-gray-700 list-disc list-inside",children:[(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{children:"Automatic Generation:"})," Certificates are automatically generated when students meet the criteria (course completion or quiz pass)"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{children:"Unique Serial Number:"})," Each certificate gets a unique serial number for verification"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{children:"Verification:"})," Students receive a verification URL/QR code to verify their certificate authenticity"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("strong",{children:"Digital Download:"})," Students can download their certificate as a PDF from their course dashboard"]})]})]})]})]}),"reviews"===P&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"border-b border-gray-200 pb-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Reviews & Ratings Settings"}),(0,s.jsxs)("div",{className:"flex items-start space-x-2 mb-4",children:[(0,s.jsx)("input",{type:"checkbox",checked:!1!==eC.allowReviews,onChange:e=>eI(s=>({...s,allowReviews:e.target.checked})),className:"rounded mt-1"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Allow Reviews"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Enable students to leave reviews and ratings for this course"})]})]}),!1!==eC.allowReviews&&(0,s.jsxs)("div",{className:"ml-6 space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:eC.autoApproveReviews||!1,onChange:e=>eI(s=>({...s,autoApproveReviews:e.target.checked})),className:"rounded mt-1"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Auto-Approve Reviews"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Reviews will be automatically approved and visible to students without admin moderation"})]})]}),(0,s.jsx)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Average Rating"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-blue-600 mt-1",children:eb>0?eb.toFixed(1):"N/A"}),eb>0&&(0,s.jsxs)("div",{className:"flex items-center mt-2",children:[[1,2,3,4,5].map(e=>(0,s.jsx)("span",{className:`text-2xl ${e<=Math.round(eb)?"text-yellow-400":"text-gray-300"}`,children:"★"},e)),(0,s.jsxs)("span",{className:"ml-2 text-sm text-gray-600",children:["(",eu.length," review",1!==eu.length?"s":"",")"]})]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Auto-calculated"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"from approved reviews"})]})]})})]})]}),(0,s.jsxs)("div",{className:"border-t border-gray-200 pt-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold",children:"Course Reviews"}),(0,s.jsx)("button",{type:"button",onClick:eV,disabled:eg,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 text-sm",children:eg?"Loading...":"Refresh"})]}),eg?(0,s.jsx)("div",{className:"text-center py-12",children:"Loading reviews..."}):0===eu.length?(0,s.jsx)("div",{className:"text-center py-12 text-gray-500 border border-dashed border-gray-300 rounded-lg",children:"No reviews yet. Reviews will appear here once students submit them."}):(0,s.jsx)("div",{className:"space-y-4",children:eu.map(e=>(0,s.jsx)("div",{className:`border rounded-lg p-4 ${e.approved?"border-green-200 bg-green-50":"border-yellow-200 bg-yellow-50"}`,children:(0,s.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,s.jsx)("div",{className:"flex",children:[1,2,3,4,5].map(t=>(0,s.jsx)("span",{className:`text-lg ${t<=e.rating?"text-yellow-400":"text-gray-300"}`,children:"★"},t))}),(0,s.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:[e.rating," / 5"]}),e.approved?(0,s.jsx)("span",{className:"px-2 py-1 text-xs rounded-full bg-green-100 text-green-800",children:"Approved"}):(0,s.jsx)("span",{className:"px-2 py-1 text-xs rounded-full bg-yellow-100 text-yellow-800",children:"Pending"})]}),e.comment&&(0,s.jsx)("p",{className:"text-sm text-gray-700 mb-2",children:e.comment}),(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:["User ID: ",e.userId," |",e.createdAt?.seconds?new Date(1e3*e.createdAt.seconds).toLocaleDateString():"Date unavailable"]})]}),(0,s.jsxs)("div",{className:"flex gap-2 ml-4",children:[!e.approved&&(0,s.jsx)("button",{type:"button",onClick:()=>eG(e.id),className:"px-3 py-1 bg-green-600 text-white rounded text-sm hover:bg-green-700",children:"Approve"}),e.approved&&(0,s.jsx)("button",{type:"button",onClick:()=>e_(e.id),className:"px-3 py-1 bg-yellow-600 text-white rounded text-sm hover:bg-yellow-700",children:"Reject"}),(0,s.jsx)("button",{type:"button",onClick:()=>eH(e.id),className:"px-3 py-1 bg-red-600 text-white rounded text-sm hover:bg-red-700",children:"Delete"})]})]})},e.id))})]})]}),"seo"===P&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"border-b border-gray-200 pb-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"SEO (Search Engine Optimization)"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Optimize how your course appears in search engine results and social media shares"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"SEO Title"}),(0,s.jsx)("input",{type:"text",value:eC.seoTitle||"",onChange:e=>eI(s=>({...s,seoTitle:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"e.g., Complete Web Development Course - Learn HTML, CSS, JavaScript",maxLength:60}),(0,s.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Recommended: 50-60 characters. Leave empty to use course title. ",(eC.seoTitle||"").length," / 60 characters"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Meta Description"}),(0,s.jsx)("textarea",{value:eC.metaDescription||"",onChange:e=>eI(s=>({...s,metaDescription:e.target.value})),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"A compelling description of your course that appears in search results...",maxLength:160}),(0,s.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Recommended: 150-160 characters. Leave empty to use course short description. ",(eC.metaDescription||"").length," / 160 characters"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Open Graph Image (OG Image)"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:"Image displayed when sharing this course on social media (Facebook, Twitter, LinkedIn, etc.)"}),eC.ogImage&&(0,s.jsx)("div",{className:"mb-3 w-full max-w-md rounded-lg overflow-hidden border border-gray-200",children:(0,s.jsx)(d.S3Image,{src:eC.ogImage,alt:"OG Image preview",className:"w-full h-auto object-cover"})}),(0,s.jsx)(n.FileUpload,{folder:"courses/og-images",onUploadComplete:e=>eI(s=>({...s,ogImage:e})),accept:"image/*"}),eC.ogImage&&(0,s.jsx)("button",{type:"button",onClick:()=>eI(e=>({...e,ogImage:void 0})),className:"mt-2 px-3 py-1 bg-red-600 text-white rounded text-sm hover:bg-red-700",children:"Remove Image"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Recommended size: 1200x630 pixels. Leave empty to use course thumbnail."})]})]})]}),(0,s.jsxs)("div",{className:"border-b border-gray-200 pb-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Landing Page Marketing"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:"Customize the marketing copy that appears on the course landing page"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Landing Page Headline"}),(0,s.jsx)("input",{type:"text",value:eC.landingPageHeadline||"",onChange:e=>eI(s=>({...s,landingPageHeadline:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"e.g., Master Web Development in 30 Days",maxLength:100}),(0,s.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Compelling headline displayed prominently on the course landing page. Leave empty to use course title. ",(eC.landingPageHeadline||"").length," / 100 characters"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Call-to-Action (CTA) Text"}),(0,s.jsx)("input",{type:"text",value:eC.ctaText||"",onChange:e=>eI(s=>({...s,ctaText:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"e.g., Enroll Now - Start Learning Today!",maxLength:50}),(0,s.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Text displayed on the primary action button (e.g., Enroll, Buy Now). Leave empty to use default. ",(eC.ctaText||"").length," / 50 characters"]})]})]})]}),(0,s.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Search Engine Preview"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mb-4",children:"This is how your course will appear in Google search results"}),(0,s.jsx)("div",{className:"bg-white border border-gray-300 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("div",{className:"text-blue-600 text-sm",children:eC.seoTitle||eC.title||"Course Title"}),(0,s.jsxs)("div",{className:"text-green-700 text-xs",children:["https://yourdomain.com/courses/",eC.slug||"course-slug"]}),(0,s.jsx)("div",{className:"text-gray-600 text-sm",children:eC.metaDescription||eC.shortDescription||"Course description will appear here..."})]})})]}),(0,s.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Social Media Preview"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mb-4",children:"This is how your course will appear when shared on social media"}),(0,s.jsxs)("div",{className:"bg-white border border-gray-300 rounded-lg overflow-hidden max-w-md",children:[(eC.ogImage||eC.thumbnailImage)&&(0,s.jsx)("div",{className:"w-full h-48 bg-gray-200 overflow-hidden",children:(0,s.jsx)(d.S3Image,{src:eC.ogImage||eC.thumbnailImage||"",alt:"Social media preview",className:"w-full h-full object-cover"})}),(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsx)("div",{className:"text-sm text-gray-500 mb-1",children:"yourdomain.com"}),(0,s.jsx)("div",{className:"font-semibold text-lg mb-1",children:eC.seoTitle||eC.title||"Course Title"}),(0,s.jsx)("div",{className:"text-sm text-gray-600",children:eC.metaDescription||eC.shortDescription||"Course description..."})]})]})]}),(0,s.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"Landing Page Preview"}),(0,s.jsxs)("div",{className:"bg-white border border-gray-300 rounded-lg p-6",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-4",children:eC.landingPageHeadline||eC.title||"Course Headline"}),(0,s.jsx)("p",{className:"text-lg text-gray-700 mb-6",children:eC.shortDescription||"Course description will appear here..."}),(0,s.jsx)("button",{className:"px-6 py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700",children:eC.ctaText||"Enroll Now"})]})]})]}),"analytics"===P&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold",children:"Course Analytics Dashboard"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Comprehensive analytics and insights for this course"})]}),(0,s.jsx)("button",{type:"button",onClick:eY,disabled:ef,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:ef?"Loading...":"Refresh Analytics"})]}),ef?(0,s.jsx)("div",{className:"text-center py-12",children:"Loading analytics data..."}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,s.jsx)("div",{className:"bg-white border border-gray-300 rounded-lg p-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Total Enrollments"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:ej.totalEnrollments.toLocaleString()})]}),(0,s.jsx)("div",{className:"text-4xl text-blue-500",children:"👥"})]})}),(0,s.jsx)("div",{className:"bg-white border border-gray-300 rounded-lg p-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Active Students"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-green-600",children:ej.activeStudents.toLocaleString()})]}),(0,s.jsx)("div",{className:"text-4xl text-green-500",children:"✓"})]})}),(0,s.jsx)("div",{className:"bg-white border border-gray-300 rounded-lg p-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Completion Rate"}),(0,s.jsxs)("p",{className:"text-3xl font-bold text-blue-600",children:[ej.completionRate,"%"]})]}),(0,s.jsx)("div",{className:"text-4xl text-blue-500",children:"📊"})]})}),(0,s.jsx)("div",{className:"bg-white border border-gray-300 rounded-lg p-6",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Revenue Generated"}),(0,s.jsxs)("p",{className:"text-2xl font-bold text-green-600",children:["INR"===eC.currency?"₹":"USD"===eC.currency?"$":"EUR"===eC.currency?"€":"£",ej.revenueGenerated.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),(0,s.jsx)("div",{className:"text-4xl text-green-500",children:"💰"})]})})]}),(0,s.jsxs)("div",{className:"bg-white border border-gray-300 rounded-lg p-6",children:[(0,s.jsx)("h4",{className:"text-lg font-semibold mb-4",children:"Lesson Drop-off Analysis"}),0===ej.lessonDropOffData.length?(0,s.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No lesson data available. Lessons will appear here once curriculum is set up."}):(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Lesson"}),(0,s.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Started"}),(0,s.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Completed"}),(0,s.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Drop-off Rate"}),(0,s.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase",children:"Progress"})]})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:ej.lessonDropOffData.map((e,t)=>{let r=e.enrollments>0?Math.round(e.completions/e.enrollments*100):0;return(0,s.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,s.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:(0,s.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[t+1,". ",e.lessonTitle]})}),(0,s.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-center text-sm text-gray-600",children:e.enrollments}),(0,s.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-center text-sm text-gray-600",children:e.completions}),(0,s.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-center",children:(0,s.jsxs)("span",{className:`text-sm font-medium ${e.dropOffRate>50?"text-red-600":e.dropOffRate>25?"text-yellow-600":"text-green-600"}`,children:[e.dropOffRate,"%"]})}),(0,s.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"w-24 bg-gray-200 rounded-full h-2 mr-2",children:(0,s.jsx)("div",{className:`h-2 rounded-full ${r>=80?"bg-green-500":r>=50?"bg-yellow-500":"bg-red-500"}`,style:{width:`${r}%`}})}),(0,s.jsxs)("span",{className:"text-xs text-gray-600 w-10",children:[r,"%"]})]})})]},e.lessonId)})})]})})]}),(0,s.jsxs)("div",{className:"bg-white border border-gray-300 rounded-lg p-6",children:[(0,s.jsx)("h4",{className:"text-lg font-semibold mb-4",children:"Engagement Trends (Last 30 Days)"}),(0,s.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Engagement data structure (ready for chart integration):"}),(0,s.jsxs)("div",{className:"text-xs text-gray-500 bg-white rounded p-3 font-mono overflow-x-auto",children:[JSON.stringify(ej.engagementGraphData.slice(0,5),null,2),ej.engagementGraphData.length>5&&(0,s.jsxs)("span",{className:"text-gray-400",children:[" ... (",ej.engagementGraphData.length-5," more days)"]})]}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"This data can be used with charting libraries (Chart.js, Recharts, etc.) to visualize engagement trends."})]})]}),(0,s.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,s.jsx)("h4",{className:"text-sm font-semibold text-blue-900 mb-2",children:"📈 Analytics Summary"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-blue-800",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Enrollment Status:"})," ",ej.totalEnrollments," total, ",ej.activeStudents," active"]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Completion:"})," ",ej.completionRate,"% of enrolled students completed the course"]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Revenue:"})," Estimated based on enrollments and course price"]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Lessons:"})," ",ej.lessonDropOffData.length," lessons tracked"]})]})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-blue-50 border border-purple-200 rounded-lg p-6",children:[(0,s.jsx)("h4",{className:"text-lg font-semibold mb-4",children:"📊 Course Relationships Summary"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-6",children:"Overview of how this course connects to all related entities in the system"}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[(0,s.jsx)("h5",{className:"font-semibold text-gray-800 mb-3",children:"Course Structure"}),(0,s.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"font-medium text-blue-600",children:"Course:"}),(0,s.jsx)("span",{className:"text-gray-700",children:eC.title||"Untitled"}),(0,s.jsx)("span",{className:"text-xs text-gray-500",children:"(1)"})]}),(0,s.jsxs)("div",{className:"ml-4 flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-gray-400",children:"└─→"}),(0,s.jsx)("span",{className:"font-medium text-green-600",children:"Sections:"}),(0,s.jsx)("span",{className:"text-gray-700",children:A.length})]}),A.length>0&&(0,s.jsxs)(s.Fragment,{children:[A.map((e,t)=>{let r=M[e.id||""]||[],a=r.reduce((e,s)=>e+(er[s.id||""]||[]).length,0);return(0,s.jsxs)("div",{className:"ml-8 space-y-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-gray-400",children:"└─→"}),(0,s.jsxs)("span",{className:"font-medium text-purple-600",children:["Section ",t+1,":"]}),(0,s.jsx)("span",{className:"text-gray-700",children:e.title})]}),(0,s.jsxs)("div",{className:"ml-4 flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-gray-400",children:"└─→"}),(0,s.jsx)("span",{className:"font-medium text-orange-600",children:"Lessons:"}),(0,s.jsx)("span",{className:"text-gray-700",children:r.length})]}),a>0&&(0,s.jsxs)("div",{className:"ml-8 flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-gray-400",children:"└─→"}),(0,s.jsx)("span",{className:"font-medium text-red-600",children:"Quizzes:"}),(0,s.jsx)("span",{className:"text-gray-700",children:a})]})]},e.id)}),(0,s.jsxs)("div",{className:"ml-4 flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-gray-400",children:"└─→"}),(0,s.jsx)("span",{className:"font-medium text-orange-600",children:"Total Lessons:"}),(0,s.jsx)("span",{className:"text-gray-700 font-semibold",children:Object.values(M).flat().length})]}),(0,s.jsxs)("div",{className:"ml-8 flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-gray-400",children:"└─→"}),(0,s.jsx)("span",{className:"font-medium text-red-600",children:"Total Quizzes:"}),(0,s.jsx)("span",{className:"text-gray-700 font-semibold",children:Object.values(er).flat().length})]})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[(0,s.jsx)("h5",{className:"font-semibold text-gray-800 mb-3",children:"Course → Instructors"}),(0,s.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"font-medium text-blue-600",children:"Instructors:"}),(0,s.jsx)("span",{className:"text-gray-700",children:eC.instructors?.length||0})]}),eC.instructors&&eC.instructors.length>0&&(0,s.jsxs)("ul",{className:"ml-4 space-y-1 text-xs text-gray-600",children:[eC.instructors.slice(0,3).map(e=>{let t=f.find(s=>s.id===e);return(0,s.jsxs)("li",{className:"flex items-center gap-1",children:[(0,s.jsx)("span",{className:"text-gray-400",children:"•"}),t?.name||`User ID: ${e.substring(0,8)}...`]},e)}),eC.instructors.length>3&&(0,s.jsxs)("li",{className:"text-gray-500",children:["+ ",eC.instructors.length-3," more"]})]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[(0,s.jsx)("h5",{className:"font-semibold text-gray-800 mb-3",children:"Course → Enrollments"}),(0,s.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"font-medium text-blue-600",children:"Total Enrollments:"}),(0,s.jsx)("span",{className:"text-gray-700 font-semibold",children:ej.totalEnrollments})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"font-medium text-green-600",children:"Active:"}),(0,s.jsx)("span",{className:"text-gray-700",children:ej.activeStudents})]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[(0,s.jsx)("h5",{className:"font-semibold text-gray-800 mb-3",children:"Course → Reviews"}),(0,s.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"font-medium text-blue-600",children:"Total Reviews:"}),(0,s.jsx)("span",{className:"text-gray-700 font-semibold",children:eu.length})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"font-medium text-green-600",children:"Approved:"}),(0,s.jsx)("span",{className:"text-gray-700",children:eu.filter(e=>e.approved).length})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"font-medium text-yellow-600",children:"Average Rating:"}),(0,s.jsxs)("span",{className:"text-gray-700",children:[eb>0?eb.toFixed(1):"N/A"," / 5"]})]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[(0,s.jsx)("h5",{className:"font-semibold text-gray-800 mb-3",children:"Course → Payments"}),(0,s.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"font-medium text-blue-600",children:"Revenue:"}),(0,s.jsxs)("span",{className:"text-gray-700 font-semibold",children:["INR"===eC.currency?"₹":"USD"===eC.currency?"$":"EUR"===eC.currency?"€":"£",ej.revenueGenerated.toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"font-medium text-gray-600",children:"Price per Enrollment:"}),(0,s.jsxs)("span",{className:"text-gray-700",children:["INR"===eC.currency?"₹":"USD"===eC.currency?"$":"EUR"===eC.currency?"€":"£",(eC.price||0).toLocaleString()]})]})]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[(0,s.jsx)("h5",{className:"font-semibold text-gray-800 mb-3",children:"Enrollment Relationships"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"flex items-center gap-2 mb-2",children:(0,s.jsx)("span",{className:"font-medium text-blue-600",children:"Enrollment → Progress"})}),(0,s.jsxs)("div",{className:"ml-4 space-y-1 text-xs text-gray-600",children:[(0,s.jsxs)("div",{children:["Total Progress Records: ",eQ.length]}),(0,s.jsxs)("div",{children:["Users with Progress: ",new Set(eQ.map(e=>e.userId)).size]}),(0,s.jsxs)("div",{children:["Completed Lessons: ",eQ.filter(e=>e.completed).length]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"flex items-center gap-2 mb-2",children:(0,s.jsx)("span",{className:"font-medium text-blue-600",children:"Enrollment → Certificate"})}),(0,s.jsxs)("div",{className:"ml-4 space-y-1 text-xs text-gray-600",children:[(0,s.jsxs)("div",{children:["Certificates Enabled: ",eC.certificateEnabled?"Yes":"No"]}),eC.certificateEnabled&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{children:["Issue Rule: ","course_complete"===eC.certificateIssueRule?"Course Complete":"Quiz Pass"]}),(0,s.jsx)("div",{className:"text-gray-500",children:"Certificate count: Query certificates collection"})]})]})]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[(0,s.jsx)("h5",{className:"font-semibold text-gray-800 mb-3",children:"Relationship Diagram"}),(0,s.jsxs)("div",{className:"text-xs font-mono text-gray-700 space-y-1 bg-gray-50 rounded p-4",children:[(0,s.jsxs)("div",{children:["Course (",eC.title||"Course",")"]}),(0,s.jsxs)("div",{className:"ml-2",children:["├─ Sections (",A.length,")"]}),(0,s.jsxs)("div",{className:"ml-4",children:["│  └─ Lessons (",Object.values(M).flat().length,")"]}),(0,s.jsxs)("div",{className:"ml-6",children:["│     └─ Quizzes (",Object.values(er).flat().length,")"]}),(0,s.jsxs)("div",{className:"ml-2",children:["├─ Instructors (",eC.instructors?.length||0,")"]}),(0,s.jsxs)("div",{className:"ml-2",children:["├─ Enrollments (",ej.totalEnrollments,")"]}),(0,s.jsxs)("div",{className:"ml-4",children:["│  ├─ Progress (",eQ.length," records)"]}),(0,s.jsx)("div",{className:"ml-4",children:"│  └─ Certificates (if enabled)"}),(0,s.jsxs)("div",{className:"ml-2",children:["├─ Reviews (",eu.length,")"]}),(0,s.jsxs)("div",{className:"ml-2",children:["└─ Payments (Revenue: ","INR"===eC.currency?"₹":"$",ej.revenueGenerated.toLocaleString(),")"]})]})]})]})]})]})]}),"progress"===P&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold",children:"Student Progress Tracking"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"View and track how students are progressing through this course"})]}),(0,s.jsx)("button",{type:"button",onClick:eB,disabled:em,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:em?"Loading...":"Refresh"})]}),em?(0,s.jsx)("div",{className:"text-center py-12",children:"Loading progress data..."}):0===ec.length?(0,s.jsx)("div",{className:"text-center py-12 text-gray-500 border border-dashed border-gray-300 rounded-lg",children:"No student progress data found. Progress will appear here as students watch lessons."}):(0,s.jsx)("div",{className:"space-y-4",children:ec.map(e=>(0,s.jsxs)("div",{className:"border border-gray-300 rounded-lg p-4 bg-white",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-semibold text-lg",children:e.userName}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:e.userEmail})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("div",{className:"text-2xl font-bold text-blue-600",children:[e.overallProgress,"%"]}),(0,s.jsxs)("p",{className:"text-xs text-gray-500",children:[e.lessonsCompleted," / ",e.totalLessons," lessons"]})]})]}),(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3",children:(0,s.jsx)("div",{className:"bg-blue-600 h-3 rounded-full transition-all duration-300",style:{width:`${e.overallProgress}%`}})})}),(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Lesson Progress:"}),(0,s.jsx)("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:e.progressData.map(e=>{let t=Object.values(M).flat().find(s=>s.id===e.lessonId);return(0,s.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded text-sm",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("div",{className:"font-medium",children:t?.title||`Lesson ID: ${e.lessonId}`}),(0,s.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Watch Time: ",eq(e.watchTime)," | Position: ",eq(e.lastWatchedPosition),e.completed&&(0,s.jsx)("span",{className:"ml-2 text-green-600 font-semibold",children:"✓ Completed"})]})]}),(0,s.jsxs)("div",{className:"ml-4",children:[(0,s.jsx)("div",{className:`w-16 h-2 rounded-full ${e.completed?"bg-green-500":"bg-gray-300"}`,children:!e.completed&&(0,s.jsx)("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${e.progressPercentage}%`}})}),(0,s.jsxs)("p",{className:"text-xs text-gray-500 text-center mt-1",children:[e.progressPercentage,"%"]})]})]},e.id)})})]})]},e.userId))}),ec.length>0&&(0,s.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[(0,s.jsx)("h4",{className:"text-lg font-semibold mb-3",children:"Course Statistics"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Total Students"}),(0,s.jsx)("p",{className:"text-2xl font-bold",children:ec.length})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Average Progress"}),(0,s.jsxs)("p",{className:"text-2xl font-bold",children:[Math.round(ec.reduce((e,s)=>e+s.overallProgress,0)/ec.length),"%"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Completed Course"}),(0,s.jsx)("p",{className:"text-2xl font-bold",children:ec.filter(e=>100===e.overallProgress).length})]})]})]})]}),(0,s.jsxs)("div",{className:"mt-8 flex gap-3",children:[(0,s.jsx)("button",{type:"submit",disabled:b,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:b?"Saving...":"Save Changes"}),(0,s.jsx)("button",{type:"button",onClick:()=>{T(!1),eE()},className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300",children:"Cancel"})]})]})]}):(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsx)("div",{children:eC.thumbnailImage&&(0,s.jsx)("div",{className:"w-full h-64 rounded-lg overflow-hidden mb-4",children:(0,s.jsx)(d.S3Image,{src:eC.thumbnailImage,alt:eC.title||"Course thumbnail",className:"w-full h-full object-cover"})})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-4",children:eC.title}),(0,s.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Slug:"})," ",eC.slug]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Status:"})," ",(0,s.jsx)("span",{className:`px-2 py-1 rounded ${"published"===eC.status?"bg-green-100 text-green-800":"draft"===eC.status?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:eC.status})]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Level:"})," ",eC.level]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Language:"})," ",eC.language]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Price:"})," ₹",eC.price]}),eC.discountedPrice&&(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Discounted Price:"})," ₹",eC.discountedPrice]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Short Description:"})," ",eC.shortDescription]})]})]})]}),(0,s.jsxs)("div",{className:"mt-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"Full Description"}),(0,s.jsx)("div",{className:"prose max-w-none",dangerouslySetInnerHTML:{__html:eC.fullDescription||""}})]})]})]})})}e.s(["default",()=>g],58367)}]);