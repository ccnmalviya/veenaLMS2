(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,84598,(e,t,l)=>{t.exports=e.r(16709)},67559,e=>{"use strict";var t=e.i(90454),l=e.i(17725),s=e.i(84598);e.i(25708);var a=e.i(63005);e.i(53068);var r=e.i(87678),o=e.i(67006);function n(){let e=(0,s.useRouter)(),[n,i]=(0,l.useState)("login"),[d,c]=(0,l.useState)("phone"),[u,x]=(0,l.useState)(!1),[m,p]=(0,l.useState)(null),[g,h]=(0,l.useState)(null),[b,f]=(0,l.useState)(""),[y,v]=(0,l.useState)(""),[w,j]=(0,l.useState)(null),[N,C]=(0,l.useState)(""),[P,S]=(0,l.useState)(""),[X,k]=(0,l.useState)(""),[T,E]=(0,l.useState)(""),[O,L]=(0,l.useState)(""),[A,R]=(0,l.useState)(""),[V,U]=(0,l.useState)("");(0,l.useEffect)(()=>{window.recaptchaVerifier||(window.recaptchaVerifier=new a.RecaptchaVerifier(o.auth,"recaptcha-container",{size:"invisible"}))},[]);let M=()=>{p(null),h(null)},W=async(e,t)=>{let l=(0,r.doc)(o.db,"users",e),s=await (0,r.getDoc)(l);if(!s.exists()){let e=(0,r.serverTimestamp)(),s={name:t?.name||"",mobile:t?.mobile||b||"",email:t?.email||P||"",city:t?.city||T||"",state:t?.state||O||"",country:t?.country||A||"",pincode:t?.pincode||V||"",gps_location:null,role:"student",created_at:e,updated_at:e};await (0,r.setDoc)(l,s)}return s.data()},$=async t=>{let l=(0,r.doc)(o.db,"users",t),s=(await (0,r.getDoc)(l)).data(),a=s?.role||"student";"super_admin"===a||"admin"===a?e.push("/admin"):e.push("/dashboard")},_=async()=>{if(M(),!b)return void p("Enter mobile number with country code, e.g. +91XXXXXXXXXX");try{x(!0);let e=window.recaptchaVerifier,t=await (0,a.signInWithPhoneNumber)(o.auth,b,e);j(t),h("OTP sent. Please check your phone.")}catch(e){console.error(e),p(e.message||"Failed to send OTP")}finally{x(!1)}},q=async()=>{if(M(),!w)return void p("Please request OTP first.");if(!y)return void p("Enter the OTP you received.");try{x(!0);let e=await w.confirm(y);await W(e.user.uid),h("Logged in successfully."),setTimeout(()=>{$(e.user.uid)},1e3)}catch(e){console.error(e),p(e.message||"Invalid OTP")}finally{x(!1)}},D=async()=>{if(M(),!P||!X)return void p("Email and password are required.");try{x(!0);let e=await (0,a.signInWithEmailAndPassword)(o.auth,P,X);await W(e.user.uid,{email:P}),h("Logged in successfully."),setTimeout(()=>{$(e.user.uid)},1e3)}catch(e){console.error(e),p(e.message||"Login failed")}finally{x(!1)}},I=async()=>{if(M(),!N||!P||!X)return void p("Name, email, and password are required.");try{x(!0);let e=await (0,a.createUserWithEmailAndPassword)(o.auth,P,X);await (0,a.updateProfile)(e.user,{displayName:N}),await W(e.user.uid,{name:N,email:P,mobile:b,city:T,state:O,country:A,pincode:V}),h("Account created and logged in."),i("login"),setTimeout(()=>{$(e.user.uid)},1e3)}catch(e){console.error(e),p(e.message||"Registration failed")}finally{x(!1)}},B="register"===n;return(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-slate-950 px-4",children:(0,t.jsxs)("div",{className:"w-full max-w-3xl rounded-2xl bg-slate-900/80 border border-slate-800 shadow-xl p-8 space-y-8",children:[(0,t.jsxs)("header",{className:"flex items-center justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-semibold text-white",children:B?"Create your account":"Welcome back"}),(0,t.jsx)("p",{className:"text-sm text-slate-400 mt-1",children:"Unified LMS + E‑commerce login (one account for courses, products, workshops)."})]}),(0,t.jsxs)("div",{className:"inline-flex rounded-full border border-slate-700 bg-slate-900 p-1",children:[(0,t.jsx)("button",{type:"button",onClick:()=>i("login"),className:`px-4 py-1 text-xs font-medium rounded-full ${"login"===n?"bg-indigo-500 text-white":"text-slate-300"}`,children:"Login"}),(0,t.jsx)("button",{type:"button",onClick:()=>i("register"),className:`px-4 py-1 text-xs font-medium rounded-full ${"register"===n?"bg-indigo-500 text-white":"text-slate-300"}`,children:"Register"})]})]}),(0,t.jsxs)("div",{className:"flex gap-6 flex-col md:flex-row",children:[(0,t.jsxs)("div",{className:"flex-1 space-y-6",children:[(0,t.jsxs)("div",{className:"inline-flex rounded-full border border-slate-700 bg-slate-900 p-1",children:[(0,t.jsx)("button",{type:"button",onClick:()=>c("phone"),className:`px-4 py-1 text-xs font-medium rounded-full ${"phone"===d?"bg-emerald-500 text-white":"text-slate-300"}`,children:"Mobile OTP"}),(0,t.jsx)("button",{type:"button",onClick:()=>c("email"),className:`px-4 py-1 text-xs font-medium rounded-full ${"email"===d?"bg-emerald-500 text-white":"text-slate-300"}`,children:"Email & Password"})]}),"phone"===d?(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-slate-200 mb-1",children:"Mobile number"}),(0,t.jsx)("input",{type:"tel",className:"w-full rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-white placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-emerald-500/60",placeholder:"+91XXXXXXXXXX",value:b,onChange:e=>f(e.target.value)})]}),B&&(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsx)("input",{type:"text",className:"rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-white placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-emerald-500/60",placeholder:"Name",value:N,onChange:e=>C(e.target.value)}),(0,t.jsx)("input",{type:"email",className:"rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-white placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-emerald-500/60",placeholder:"Email (optional)",value:P,onChange:e=>S(e.target.value)}),(0,t.jsx)("input",{type:"text",className:"rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-white placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-emerald-500/60",placeholder:"City",value:T,onChange:e=>E(e.target.value)}),(0,t.jsx)("input",{type:"text",className:"rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-white placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-emerald-500/60",placeholder:"State",value:O,onChange:e=>L(e.target.value)}),(0,t.jsx)("input",{type:"text",className:"rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-white placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-emerald-500/60",placeholder:"Country",value:A,onChange:e=>R(e.target.value)}),(0,t.jsx)("input",{type:"text",className:"rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-white placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-emerald-500/60",placeholder:"Pincode",value:V,onChange:e=>U(e.target.value)})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("button",{type:"button",onClick:_,disabled:u,className:"inline-flex items-center justify-center rounded-lg bg-emerald-500 px-4 py-2 text-sm font-medium text-white hover:bg-emerald-600 disabled:opacity-60",children:u?"Sending...":"Send OTP"}),(0,t.jsx)("input",{type:"text",className:"flex-1 rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-white placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-emerald-500/60",placeholder:"Enter OTP",value:y,onChange:e=>v(e.target.value)}),(0,t.jsx)("button",{type:"button",onClick:q,disabled:u,className:"inline-flex items-center justify-center rounded-lg bg-indigo-500 px-4 py-2 text-sm font-medium text-white hover:bg-indigo-600 disabled:opacity-60",children:u?"Verifying...":"Verify"})]})]}):(0,t.jsxs)("div",{className:"space-y-4",children:[B&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-slate-200 mb-1",children:"Full name"}),(0,t.jsx)("input",{type:"text",className:"w-full rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-white placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-emerald-500/60",placeholder:"Your name",value:N,onChange:e=>C(e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-slate-200 mb-1",children:"Email"}),(0,t.jsx)("input",{type:"email",className:"w-full rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-white placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-emerald-500/60",placeholder:"you@example.com",value:P,onChange:e=>S(e.target.value)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm text-slate-200 mb-1",children:"Password"}),(0,t.jsx)("input",{type:"password",className:"w-full rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-white placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-emerald-500/60",placeholder:"••••••••",value:X,onChange:e=>k(e.target.value)})]}),B&&(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsx)("input",{type:"tel",className:"rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-white placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-emerald-500/60",placeholder:"Mobile (+91...)",value:b,onChange:e=>f(e.target.value)}),(0,t.jsx)("input",{type:"text",className:"rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-white placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-emerald-500/60",placeholder:"City",value:T,onChange:e=>E(e.target.value)}),(0,t.jsx)("input",{type:"text",className:"rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-white placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-emerald-500/60",placeholder:"State",value:O,onChange:e=>L(e.target.value)}),(0,t.jsx)("input",{type:"text",className:"rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-white placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-emerald-500/60",placeholder:"Country",value:A,onChange:e=>R(e.target.value)}),(0,t.jsx)("input",{type:"text",className:"rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-white placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-emerald-500/60",placeholder:"Pincode",value:V,onChange:e=>U(e.target.value)})]}),(0,t.jsx)("button",{type:"button",onClick:B?I:D,disabled:u,className:"inline-flex w-full items-center justify-center rounded-lg bg-emerald-500 px-4 py-2.5 text-sm font-medium text-white hover:bg-emerald-600 disabled:opacity-60",children:u?"Please wait...":B?"Create account":"Login"})]})]}),(0,t.jsxs)("aside",{className:"w-full md:w-72 rounded-2xl border border-slate-800 bg-gradient-to-b from-slate-900 to-slate-950 px-4 py-5 text-sm text-slate-300 space-y-3",children:[(0,t.jsx)("h2",{className:"text-sm font-semibold text-white",children:"One account for everything"}),(0,t.jsxs)("ul",{className:"list-disc list-inside space-y-1 text-xs text-slate-300",children:[(0,t.jsx)("li",{children:"Access all courses, live classes, and workshops."}),(0,t.jsx)("li",{children:"Track orders, certificates, and learning progress."}),(0,t.jsx)("li",{children:"Use the same login on web and mobile (future app)."})]}),(0,t.jsxs)("div",{className:"mt-3 rounded-lg border border-emerald-700/50 bg-emerald-950/40 px-3 py-2 text-xs text-emerald-200",children:["Location details are used only to show"," ",(0,t.jsx)("span",{className:"font-semibold",children:"nearby workshops and relevant products"}),". You can update them later from your profile."]})]})]}),(m||g)&&(0,t.jsxs)("div",{className:"text-sm",children:[m&&(0,t.jsx)("p",{className:"text-rose-400",children:m}),g&&(0,t.jsx)("p",{className:"text-emerald-400",children:g})]}),(0,t.jsx)("div",{id:"recaptcha-container"})]})})}e.s(["default",()=>n])}]);