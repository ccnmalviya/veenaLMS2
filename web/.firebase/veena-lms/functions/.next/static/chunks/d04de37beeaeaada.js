(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,19842,e=>{"use strict";var s=e.i(90454),r=e.i(17725);e.i(53068);var t=e.i(87678),l=e.i(67006);function a(){let[e,a]=(0,r.useState)(null),[o,c]=(0,r.useState)(!0);return((0,r.useEffect)(()=>{(async()=>{let e={};try{let s=(await (0,t.getDocs)((0,t.collection)(l.db,"store_items"))).docs.map(e=>({id:e.id,...e.data()}));e.storeItems={count:s.length,sample:s.slice(0,2)}}catch(s){e.storeItems={count:0,error:`${s.code}: ${s.message}`}}try{let s=(await (0,t.getDocs)((0,t.collection)(l.db,"categories"))).docs.map(e=>({id:e.id,...e.data()}));e.categories={count:s.length,sample:s.slice(0,2)}}catch(s){e.categories={count:0,error:`${s.code}: ${s.message}`}}try{let s=(await (0,t.getDocs)((0,t.collection)(l.db,"hero_banners"))).docs.map(e=>({id:e.id,...e.data()}));e.heroBanners={count:s.length,sample:s.slice(0,2)}}catch(s){e.heroBanners={count:0,error:`${s.code}: ${s.message}`}}try{let s=(await (0,t.getDocs)((0,t.collection)(l.db,"courses"))).docs.map(e=>({id:e.id,...e.data()}));e.courses={count:s.length,sample:s.slice(0,2)}}catch(s){e.courses={count:0,error:`${s.code}: ${s.message}`}}a(e),c(!1)})()},[]),o)?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 p-8",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Firestore Diagnostic Tool"}),(0,s.jsx)("p",{children:"Checking Firestore connectivity..."})]})}):(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 p-8",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Firestore Diagnostic Tool"}),(0,s.jsx)("p",{className:"text-gray-600 mb-6",children:"This page tests if your Firestore collections are accessible and shows sample data."}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-3",children:"store_items Collection"}),e?.storeItems.error?(0,s.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded p-4",children:[(0,s.jsx)("p",{className:"text-red-800 font-semibold",children:"âŒ Error:"}),(0,s.jsx)("p",{className:"text-red-700",children:e.storeItems.error}),e.storeItems.error.includes("permission-denied")&&(0,s.jsx)("p",{className:"text-red-600 mt-2 text-sm",children:"ðŸ”’ Firestore security rules are blocking access. Update rules to allow public read access."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("p",{className:"text-gray-700 mb-3",children:[(0,s.jsx)("strong",{children:"Count:"})," ",e?.storeItems.count," items"]}),e?.storeItems.sample&&e.storeItems.sample.length>0&&(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("p",{className:"text-sm font-semibold mb-2",children:"Sample Data (first 2 items):"}),(0,s.jsx)("pre",{className:"bg-gray-100 p-4 rounded text-xs overflow-auto",children:JSON.stringify(e.storeItems.sample,null,2)})]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-3",children:"categories Collection"}),e?.categories.error?(0,s.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded p-4",children:[(0,s.jsx)("p",{className:"text-red-800 font-semibold",children:"âŒ Error:"}),(0,s.jsx)("p",{className:"text-red-700",children:e.categories.error}),e.categories.error.includes("permission-denied")&&(0,s.jsx)("p",{className:"text-red-600 mt-2 text-sm",children:"ðŸ”’ Firestore security rules are blocking access. Update rules to allow public read access."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("p",{className:"text-gray-700 mb-3",children:[(0,s.jsx)("strong",{children:"Count:"})," ",e?.categories.count," items"]}),e?.categories.sample&&e.categories.sample.length>0&&(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("p",{className:"text-sm font-semibold mb-2",children:"Sample Data (first 2 items):"}),(0,s.jsx)("pre",{className:"bg-gray-100 p-4 rounded text-xs overflow-auto",children:JSON.stringify(e.categories.sample,null,2)})]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-3",children:"hero_banners Collection"}),e?.heroBanners.error?(0,s.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded p-4",children:[(0,s.jsx)("p",{className:"text-red-800 font-semibold",children:"âŒ Error:"}),(0,s.jsx)("p",{className:"text-red-700",children:e.heroBanners.error}),e.heroBanners.error.includes("permission-denied")&&(0,s.jsx)("p",{className:"text-red-600 mt-2 text-sm",children:"ðŸ”’ Firestore security rules are blocking access. Update rules to allow public read access."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("p",{className:"text-gray-700 mb-3",children:[(0,s.jsx)("strong",{children:"Count:"})," ",e?.heroBanners.count," items"]}),e?.heroBanners.sample&&e.heroBanners.sample.length>0&&(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("p",{className:"text-sm font-semibold mb-2",children:"Sample Data (first 2 items):"}),(0,s.jsx)("pre",{className:"bg-gray-100 p-4 rounded text-xs overflow-auto",children:JSON.stringify(e.heroBanners.sample,null,2)})]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-3",children:"courses Collection"}),e?.courses.error?(0,s.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded p-4",children:[(0,s.jsx)("p",{className:"text-red-800 font-semibold",children:"âŒ Error:"}),(0,s.jsx)("p",{className:"text-red-700",children:e.courses.error}),e.courses.error.includes("permission-denied")&&(0,s.jsx)("p",{className:"text-red-600 mt-2 text-sm",children:"ðŸ”’ Firestore security rules are blocking access. Update rules to allow public read access."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("p",{className:"text-gray-700 mb-3",children:[(0,s.jsx)("strong",{children:"Count:"})," ",e?.courses.count," items"]}),e?.courses.sample&&e.courses.sample.length>0&&(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("p",{className:"text-sm font-semibold mb-2",children:"Sample Data (first 2 items):"}),(0,s.jsx)("pre",{className:"bg-gray-100 p-4 rounded text-xs overflow-auto",children:JSON.stringify(e.courses.sample,null,2)})]})]})]})]}),(0,s.jsxs)("div",{className:"mt-8 bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,s.jsx)("h3",{className:"font-semibold text-blue-900 mb-2",children:"How to Fix Permission Errors:"}),(0,s.jsxs)("ol",{className:"list-decimal list-inside space-y-2 text-sm text-blue-800",children:[(0,s.jsx)("li",{children:"Go to Firebase Console â†’ Firestore Database â†’ Rules"}),(0,s.jsx)("li",{children:"Add rules to allow public read access:"}),(0,s.jsx)("li",{children:(0,s.jsx)("pre",{className:"bg-blue-100 p-2 rounded mt-2 text-xs",children:`match /store_items/{document=**} {
  allow read: if true;
  allow write: if request.auth != null;
}`})}),(0,s.jsx)("li",{children:"Do the same for categories, hero_banners, and courses collections"}),(0,s.jsx)("li",{children:'Click "Publish" to save the rules'})]})]})]})})}e.s(["default",()=>a])}]);