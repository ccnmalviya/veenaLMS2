module.exports=[23250,(a,b,c)=>{"use strict";b.exports=a.r(44009).vendored.contexts.AppRouterContext},66113,(a,b,c)=>{"use strict";b.exports=a.r(44009).vendored.contexts.HooksClientContext},17357,(a,b,c)=>{"use strict";b.exports=a.r(44009).vendored.contexts.ServerInsertedHtml},88398,(a,b,c)=>{"use strict";b.exports=a.r(44009).vendored["react-ssr"].ReactJsxRuntime},44009,(a,b,c)=>{"use strict";b.exports=a.r(18622)},96600,(a,b,c)=>{"use strict";b.exports=a.r(44009).vendored["react-ssr"].React},18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},14747,(a,b,c)=>{b.exports=a.x("path",()=>require("path"))},24361,(a,b,c)=>{b.exports=a.x("util",()=>require("util"))},54799,(a,b,c)=>{b.exports=a.x("crypto",()=>require("crypto"))},46786,(a,b,c)=>{b.exports=a.x("os",()=>require("os"))},22734,(a,b,c)=>{b.exports=a.x("fs",()=>require("fs"))},27699,(a,b,c)=>{b.exports=a.x("events",()=>require("events"))},88947,(a,b,c)=>{b.exports=a.x("stream",()=>require("stream"))},25328,(a,b,c)=>{b.exports=a.x("http2",()=>require("http2"))},21517,(a,b,c)=>{b.exports=a.x("http",()=>require("http"))},92509,(a,b,c)=>{b.exports=a.x("url",()=>require("url"))},6461,(a,b,c)=>{b.exports=a.x("zlib",()=>require("zlib"))},78342,a=>{"use strict";var b=a.i(88398),c=a.i(96600),d=a.i(71852);a.i(17149);var e=a.i(4);a.i(55614);var f=a.i(93749),g=a.i(47073);function h(){let a=(0,d.useRouter)(),[h,i]=(0,c.useState)("login"),[j,k]=(0,c.useState)("phone"),[l,m]=(0,c.useState)(!1),[n,o]=(0,c.useState)(null),[p,q]=(0,c.useState)(null),[r,s]=(0,c.useState)(""),[t,u]=(0,c.useState)(""),[v,w]=(0,c.useState)(null),[x,y]=(0,c.useState)(""),[z,A]=(0,c.useState)(""),[B,C]=(0,c.useState)(""),[D,E]=(0,c.useState)(""),[F,G]=(0,c.useState)(""),[H,I]=(0,c.useState)(""),[J,K]=(0,c.useState)("");(0,c.useEffect)(()=>{},[]);let L=()=>{o(null),q(null)},M=async(a,b)=>{let c=(0,f.doc)(g.db,"users",a),d=await (0,f.getDoc)(c);if(!d.exists()){let a=(0,f.serverTimestamp)(),d={name:b?.name||"",mobile:b?.mobile||r||"",email:b?.email||z||"",city:b?.city||D||"",state:b?.state||F||"",country:b?.country||H||"",pincode:b?.pincode||J||"",gps_location:null,role:"student",created_at:a,updated_at:a};await (0,f.setDoc)(c,d)}return d.data()},N=async b=>{let c=(0,f.doc)(g.db,"users",b),d=(await (0,f.getDoc)(c)).data(),e=d?.role||"student";"super_admin"===e||"admin"===e?a.push("/admin"):a.push("/dashboard")},O=async()=>{if(L(),!r)return void o("Enter mobile number with country code, e.g. +91XXXXXXXXXX");try{m(!0);let a=window.recaptchaVerifier,b=await (0,e.signInWithPhoneNumber)(g.auth,r,a);w(b),q("OTP sent. Please check your phone.")}catch(a){console.error(a),o(a.message||"Failed to send OTP")}finally{m(!1)}},P=async()=>{if(L(),!v)return void o("Please request OTP first.");if(!t)return void o("Enter the OTP you received.");try{m(!0);let a=await v.confirm(t);await M(a.user.uid),q("Logged in successfully."),setTimeout(()=>{N(a.user.uid)},1e3)}catch(a){console.error(a),o(a.message||"Invalid OTP")}finally{m(!1)}},Q=async()=>{if(L(),!z||!B)return void o("Email and password are required.");try{m(!0);let a=await (0,e.signInWithEmailAndPassword)(g.auth,z,B);await M(a.user.uid,{email:z}),q("Logged in successfully."),setTimeout(()=>{N(a.user.uid)},1e3)}catch(a){console.error(a),o(a.message||"Login failed")}finally{m(!1)}},R=async()=>{if(L(),!x||!z||!B)return void o("Name, email, and password are required.");try{m(!0);let a=await (0,e.createUserWithEmailAndPassword)(g.auth,z,B);await (0,e.updateProfile)(a.user,{displayName:x}),await M(a.user.uid,{name:x,email:z,mobile:r,city:D,state:F,country:H,pincode:J}),q("Account created and logged in."),i("login"),setTimeout(()=>{N(a.user.uid)},1e3)}catch(a){console.error(a),o(a.message||"Registration failed")}finally{m(!1)}},S="register"===h;return(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-slate-950 px-4",children:(0,b.jsxs)("div",{className:"w-full max-w-3xl rounded-2xl bg-slate-900/80 border border-slate-800 shadow-xl p-8 space-y-8",children:[(0,b.jsxs)("header",{className:"flex items-center justify-between gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-semibold text-white",children:S?"Create your account":"Welcome back"}),(0,b.jsx)("p",{className:"text-sm text-slate-400 mt-1",children:"Unified LMS + E‑commerce login (one account for courses, products, workshops)."})]}),(0,b.jsxs)("div",{className:"inline-flex rounded-full border border-slate-700 bg-slate-900 p-1",children:[(0,b.jsx)("button",{type:"button",onClick:()=>i("login"),className:`px-4 py-1 text-xs font-medium rounded-full ${"login"===h?"bg-indigo-500 text-white":"text-slate-300"}`,children:"Login"}),(0,b.jsx)("button",{type:"button",onClick:()=>i("register"),className:`px-4 py-1 text-xs font-medium rounded-full ${"register"===h?"bg-indigo-500 text-white":"text-slate-300"}`,children:"Register"})]})]}),(0,b.jsxs)("div",{className:"flex gap-6 flex-col md:flex-row",children:[(0,b.jsxs)("div",{className:"flex-1 space-y-6",children:[(0,b.jsxs)("div",{className:"inline-flex rounded-full border border-slate-700 bg-slate-900 p-1",children:[(0,b.jsx)("button",{type:"button",onClick:()=>k("phone"),className:`px-4 py-1 text-xs font-medium rounded-full ${"phone"===j?"bg-emerald-500 text-white":"text-slate-300"}`,children:"Mobile OTP"}),(0,b.jsx)("button",{type:"button",onClick:()=>k("email"),className:`px-4 py-1 text-xs font-medium rounded-full ${"email"===j?"bg-emerald-500 text-white":"text-slate-300"}`,children:"Email & Password"})]}),"phone"===j?(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-slate-200 mb-1",children:"Mobile number"}),(0,b.jsx)("input",{type:"tel",className:"w-full rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-white placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-emerald-500/60",placeholder:"+91XXXXXXXXXX",value:r,onChange:a=>s(a.target.value)})]}),S&&(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,b.jsx)("input",{type:"text",className:"rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-white placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-emerald-500/60",placeholder:"Name",value:x,onChange:a=>y(a.target.value)}),(0,b.jsx)("input",{type:"email",className:"rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-white placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-emerald-500/60",placeholder:"Email (optional)",value:z,onChange:a=>A(a.target.value)}),(0,b.jsx)("input",{type:"text",className:"rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-white placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-emerald-500/60",placeholder:"City",value:D,onChange:a=>E(a.target.value)}),(0,b.jsx)("input",{type:"text",className:"rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-white placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-emerald-500/60",placeholder:"State",value:F,onChange:a=>G(a.target.value)}),(0,b.jsx)("input",{type:"text",className:"rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-white placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-emerald-500/60",placeholder:"Country",value:H,onChange:a=>I(a.target.value)}),(0,b.jsx)("input",{type:"text",className:"rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-white placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-emerald-500/60",placeholder:"Pincode",value:J,onChange:a=>K(a.target.value)})]}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("button",{type:"button",onClick:O,disabled:l,className:"inline-flex items-center justify-center rounded-lg bg-emerald-500 px-4 py-2 text-sm font-medium text-white hover:bg-emerald-600 disabled:opacity-60",children:l?"Sending...":"Send OTP"}),(0,b.jsx)("input",{type:"text",className:"flex-1 rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-white placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-emerald-500/60",placeholder:"Enter OTP",value:t,onChange:a=>u(a.target.value)}),(0,b.jsx)("button",{type:"button",onClick:P,disabled:l,className:"inline-flex items-center justify-center rounded-lg bg-indigo-500 px-4 py-2 text-sm font-medium text-white hover:bg-indigo-600 disabled:opacity-60",children:l?"Verifying...":"Verify"})]})]}):(0,b.jsxs)("div",{className:"space-y-4",children:[S&&(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-slate-200 mb-1",children:"Full name"}),(0,b.jsx)("input",{type:"text",className:"w-full rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-white placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-emerald-500/60",placeholder:"Your name",value:x,onChange:a=>y(a.target.value)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-slate-200 mb-1",children:"Email"}),(0,b.jsx)("input",{type:"email",className:"w-full rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-white placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-emerald-500/60",placeholder:"you@example.com",value:z,onChange:a=>A(a.target.value)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm text-slate-200 mb-1",children:"Password"}),(0,b.jsx)("input",{type:"password",className:"w-full rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-white placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-emerald-500/60",placeholder:"••••••••",value:B,onChange:a=>C(a.target.value)})]}),S&&(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,b.jsx)("input",{type:"tel",className:"rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-white placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-emerald-500/60",placeholder:"Mobile (+91...)",value:r,onChange:a=>s(a.target.value)}),(0,b.jsx)("input",{type:"text",className:"rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-white placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-emerald-500/60",placeholder:"City",value:D,onChange:a=>E(a.target.value)}),(0,b.jsx)("input",{type:"text",className:"rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-white placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-emerald-500/60",placeholder:"State",value:F,onChange:a=>G(a.target.value)}),(0,b.jsx)("input",{type:"text",className:"rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-white placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-emerald-500/60",placeholder:"Country",value:H,onChange:a=>I(a.target.value)}),(0,b.jsx)("input",{type:"text",className:"rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm text-white placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-emerald-500/60",placeholder:"Pincode",value:J,onChange:a=>K(a.target.value)})]}),(0,b.jsx)("button",{type:"button",onClick:S?R:Q,disabled:l,className:"inline-flex w-full items-center justify-center rounded-lg bg-emerald-500 px-4 py-2.5 text-sm font-medium text-white hover:bg-emerald-600 disabled:opacity-60",children:l?"Please wait...":S?"Create account":"Login"})]})]}),(0,b.jsxs)("aside",{className:"w-full md:w-72 rounded-2xl border border-slate-800 bg-gradient-to-b from-slate-900 to-slate-950 px-4 py-5 text-sm text-slate-300 space-y-3",children:[(0,b.jsx)("h2",{className:"text-sm font-semibold text-white",children:"One account for everything"}),(0,b.jsxs)("ul",{className:"list-disc list-inside space-y-1 text-xs text-slate-300",children:[(0,b.jsx)("li",{children:"Access all courses, live classes, and workshops."}),(0,b.jsx)("li",{children:"Track orders, certificates, and learning progress."}),(0,b.jsx)("li",{children:"Use the same login on web and mobile (future app)."})]}),(0,b.jsxs)("div",{className:"mt-3 rounded-lg border border-emerald-700/50 bg-emerald-950/40 px-3 py-2 text-xs text-emerald-200",children:["Location details are used only to show"," ",(0,b.jsx)("span",{className:"font-semibold",children:"nearby workshops and relevant products"}),". You can update them later from your profile."]})]})]}),(n||p)&&(0,b.jsxs)("div",{className:"text-sm",children:[n&&(0,b.jsx)("p",{className:"text-rose-400",children:n}),p&&(0,b.jsx)("p",{className:"text-emerald-400",children:p})]}),(0,b.jsx)("div",{id:"recaptcha-container"})]})})}a.s(["default",()=>h])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__8c7b1c83._.js.map