module.exports=[52132,a=>{"use strict";var b=a.i(88398),c=a.i(96600),d=a.i(71852);a.i(55614);var e=a.i(93749),f=a.i(47073),g=a.i(56219),h=a.i(35538);function i(){let a=(0,d.useRouter)(),[i,j]=(0,c.useState)(!1),[k,l]=(0,c.useState)({name:"",slug:"",image:"",description:"",orderIndex:0,status:"active"}),m=a=>a.toLowerCase().trim().replace(/[^\w\s-]/g,"").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,""),n=async a=>{let b=(0,e.query)((0,e.collection)(f.db,"categories"),(0,e.where)("slug","==",a));return(await (0,e.getDocs)(b)).empty},o=async b=>{b.preventDefault();try{j(!0);let b=k.slug||m(k.name),c=1,d=b;for(;!await n(d);)d=`${b}-${c}`,c++;await (0,e.addDoc)((0,e.collection)(f.db,"categories"),{name:k.name,slug:d,image:k.image||null,description:k.description||null,orderIndex:k.orderIndex,status:k.status,createdAt:(0,e.serverTimestamp)(),updatedAt:(0,e.serverTimestamp)()}),a.push("/admin/courses/categories")}catch(a){console.error("Error creating category:",a),alert("Failed to create category")}finally{j(!1)}};return(0,b.jsx)(g.AdminLayout,{children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsx)("button",{onClick:()=>a.back(),className:"text-blue-600 hover:text-blue-800 mb-4",children:"â† Back to Categories"}),(0,b.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"New Course Category"}),(0,b.jsx)("p",{className:"text-gray-600 mt-2",children:"Create a new category for courses"})]}),(0,b.jsxs)("form",{onSubmit:o,className:"bg-white rounded-lg shadow p-6 space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category Name *"}),(0,b.jsx)("input",{type:"text",required:!0,value:k.name,onChange:a=>{l({...k,name:a.target.value}),k.slug||l(b=>({...b,slug:m(a.target.value)}))},className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"e.g., Programming, Design, Marketing"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Slug *"}),(0,b.jsx)("input",{type:"text",required:!0,value:k.slug,onChange:a=>l({...k,slug:m(a.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"e.g., programming, design, marketing"}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-generated from name, but can be edited"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Image (Optional)"}),(0,b.jsx)(h.FileUpload,{accept:"image/*",folder:"categories/images",currentValue:k.image,onUploadComplete:a=>{console.log("Upload complete, URL:",a),l(b=>({...b,image:a}))},onUploadError:a=>{alert(`Upload failed: ${a}`)}}),k.image&&(0,b.jsxs)("div",{className:"mt-4",children:[(0,b.jsx)("img",{src:k.image,alt:"Category image",className:"w-32 h-32 object-cover border border-gray-300 rounded"}),(0,b.jsx)("button",{type:"button",onClick:()=>l(a=>({...a,image:""})),className:"mt-2 text-sm text-red-600 hover:text-red-800",children:"Remove Image"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,b.jsx)("textarea",{value:k.description,onChange:a=>l({...k,description:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",rows:3,placeholder:"Brief description of this category"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Order Index"}),(0,b.jsx)("input",{type:"number",value:k.orderIndex,onChange:a=>l({...k,orderIndex:parseInt(a.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",placeholder:"0"}),(0,b.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Lower numbers appear first in the category list"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,b.jsxs)("select",{value:k.status,onChange:a=>l({...k,status:a.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg",children:[(0,b.jsx)("option",{value:"active",children:"Active"}),(0,b.jsx)("option",{value:"inactive",children:"Inactive"})]})]}),(0,b.jsxs)("div",{className:"flex gap-4 pt-4",children:[(0,b.jsx)("button",{type:"submit",disabled:i,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:i?"Creating...":"Create Category"}),(0,b.jsx)("button",{type:"button",onClick:()=>a.back(),className:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300",children:"Cancel"})]})]})]})})}a.s(["default",()=>i])}];

//# sourceMappingURL=2f7c9_lms-ecommerce_web_src_app_admin_courses_categories_new_page_tsx_f0c4c9cc._.js.map