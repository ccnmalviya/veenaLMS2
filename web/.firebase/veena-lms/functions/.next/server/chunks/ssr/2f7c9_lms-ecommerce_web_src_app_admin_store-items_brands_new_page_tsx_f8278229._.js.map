{"version":3,"sources":["../../../../../../../../Downloads/Telegram%20Desktop/lms-ecommerce/web/src/app/admin/store-items/brands/new/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { collection, addDoc, getDocs, serverTimestamp, query, where } from \"firebase/firestore\";\nimport { db } from \"@/lib/firebaseClient\";\nimport { AdminLayout } from \"@/components/admin/AdminLayout\";\nimport { FileUpload } from \"@/components/admin/FileUpload\";\n\nexport default function NewBrandPage() {\n  const router = useRouter();\n  const [loading, setLoading] = useState(false);\n  const [formData, setFormData] = useState({\n    name: \"\",\n    logo: \"\",\n    description: \"\",\n    websiteUrl: \"\",\n    status: \"active\" as \"active\" | \"inactive\",\n  });\n\n  const checkNameUnique = async (name: string): Promise<boolean> => {\n    const q = query(collection(db, \"brands\"), where(\"name\", \"==\", name));\n    const snapshot = await getDocs(q);\n    return snapshot.empty;\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    try {\n      setLoading(true);\n\n      // Check name uniqueness\n      if (!(await checkNameUnique(formData.name))) {\n        alert(\"Brand name already exists. Please choose a different name.\");\n        return;\n      }\n\n      await addDoc(collection(db, \"brands\"), {\n        name: formData.name,\n        logo: formData.logo || null,\n        description: formData.description || null,\n        websiteUrl: formData.websiteUrl || null,\n        status: formData.status,\n        createdAt: serverTimestamp(),\n        updatedAt: serverTimestamp(),\n      });\n      router.push(\"/admin/store-items/brands\");\n    } catch (error) {\n      console.error(\"Error creating brand:\", error);\n      alert(\"Failed to create brand\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <AdminLayout>\n      <div className=\"space-y-6\">\n        <div className=\"mb-8\">\n          <button\n            onClick={() => router.back()}\n            className=\"text-blue-600 hover:text-blue-800 mb-4\"\n          >\n            ‚Üê Back\n          </button>\n          <h1 className=\"text-3xl font-bold text-gray-900\">Add New Brand</h1>\n        </div>\n\n        <form onSubmit={handleSubmit} className=\"bg-white rounded-lg shadow p-6 max-w-2xl\">\n          <div className=\"space-y-4\">\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">Name *</label>\n              <input\n                type=\"text\"\n                required\n                value={formData.name}\n                onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg\"\n                placeholder=\"Brand Name\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">Logo</label>\n              <FileUpload\n                accept=\"image/*\"\n                folder=\"brands/logos\"\n                currentValue={formData.logo}\n                onUploadComplete={(url) => {\n                  console.log(\"Upload complete, URL:\", url);\n                  setFormData((prev) => ({ ...prev, logo: url }));\n                }}\n                onUploadError={(error) => {\n                  alert(`Upload failed: ${error}`);\n                }}\n              />\n              {formData.logo && (\n                <div className=\"mt-4\">\n                  <img\n                    src={formData.logo}\n                    alt=\"Brand logo\"\n                    className=\"w-32 h-32 object-contain border border-gray-300 rounded\"\n                  />\n                  <button\n                    type=\"button\"\n                    onClick={() => setFormData((prev) => ({ ...prev, logo: \"\" }))}\n                    className=\"mt-2 text-sm text-red-600 hover:text-red-800\"\n                  >\n                    Remove Logo\n                  </button>\n                </div>\n              )}\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">Description (Optional)</label>\n              <textarea\n                rows={4}\n                value={formData.description}\n                onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg\"\n                placeholder=\"Brand description...\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">Website URL (Optional)</label>\n              <input\n                type=\"url\"\n                value={formData.websiteUrl}\n                onChange={(e) => setFormData({ ...formData, websiteUrl: e.target.value })}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg\"\n                placeholder=\"https://...\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 mb-1\">Status *</label>\n              <select\n                required\n                value={formData.status}\n                onChange={(e) => setFormData({ ...formData, status: e.target.value as any })}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg\"\n              >\n                <option value=\"active\">Active</option>\n                <option value=\"inactive\">Inactive</option>\n              </select>\n            </div>\n\n            <div className=\"flex gap-4 pt-4\">\n              <button\n                type=\"submit\"\n                disabled={loading}\n                className=\"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50\"\n              >\n                {loading ? \"Creating...\" : \"Create Brand\"}\n              </button>\n              <button\n                type=\"button\"\n                onClick={() => router.back()}\n                className=\"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300\"\n              >\n                Cancel\n              </button>\n            </div>\n          </div>\n        </form>\n      </div>\n    </AdminLayout>\n  );\n}\n\n"],"names":[],"mappings":"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"}